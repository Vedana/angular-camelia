/* Camelia (c) 2014 Vedana http://www.vedana.com
 License: Creative Commons - The licensor permits others to copy, distribute, display, and perform the work. In return, licenses may not use the work for commercial purposes -- unless they get the licensor's permission.
 Author: olivier.oeuillot@vedana.com */

!function(a,b,c){"use strict";var d=b.module("camelia.core",[]);d.factory("camelia.core",["$q","$rootScope","$log","$exceptionHandler","$injector",function(a,d,e,f,g){function h(a){return parseInt(a,10)}var i=c;return{Assert:function(a,b,c){if(!a){var d=Array.prototype.slice.call(arguments,2);d.unshift("Assert error:'",b||"?","':");var c=this.format(d),e=new Error(c);f(e)}},IsMSIE:function(){if(i!==c)return i;var a=navigator.userAgent.toLowerCase();return i=h((/msie (\d+)/.exec(a)||[])[1]),isNaN(i)&&(i=h((/trident\/.*; rv:(\d+)/.exec(a)||[])[1])),i},createElement:function(a,d,e){a.injector&&(a=a[0]);var f;9==a.nodeType?(f=a,a=f.body.parentNode):f=a.ownerDocument;for(var g=c,h=1;h<arguments.length;){var d=arguments[h++],e=arguments[h++];this.Assert("string"==typeof d,"createElement","Invalid 'tagName' parameter ("+d+")"),this.Assert(e===c||"object"==typeof e,"createElement","Invalid properties parameter ("+e+")"),this.IsMSIE()<=6&&"input"==d.toLowerCase()&&e&&e.type&&e.name?(g=f.createElement('<input name="'+e.name+'" type="'+e.type+'">'),delete e.name,delete e.type):g=f.createElement(d);var i=null,j=null;if(e)for(var k in e){var l=e[k];switch(k.toLowerCase()){case"classname":case"class":b.isArray(l)&&(l=l.join(" ")),g.className=l;break;case"textnode":i=l;break;case"innerhtml":j=l;break;case"role":case"aria-live":case"aria-atomic":case"aria-relevant":g.setAttribute(k,l);break;case"style":for(var m=l.split(";"),n=0;n<m.length;n++){var o=m[n].split(":"),p=this.trim(o[0]),q=this.trim(o[1]);g.style[p]=q}break;default:if(!k.indexOf("css")){g.style[k.substring(3,4).toLowerCase()+k.substring(4)]=l;break}switch(typeof l){case"function":case"object":g[k]=l;break;default:"$"!=k.charAt(0)?g.setAttribute(k,l):g[k.substring(1)]=l}}}a.appendChild?a.appendChild(g):a.append(g),null!==i&&g.appendChild(f.createTextNode(i)),null!==j&&(g.innerHTML=j),a=g}return b.element(g)},MixClasses:function(a,b,c,d){function e(a,b,d){for(var f=d;f<c.length;){var g=b+c[f++];a.push(g),e(a,g,f)}}for(var f=[],g=0;g<b.length;g++){var h=this.trim(b[g]);h&&(f.push(h),e(f,h,0))}a.injector&&(a=a[0]),d&&(f=f.concat(d));var i=f.join(" ");return a.className==i?!1:(a.className=i,!0)},BubbleEvent:function(a,c,d){a[0]&&(a=a[0]);var e=b.element,g=e.cache,h=e.expando;d=d||[];var i={type:c,currentTarget:a,relatedTarget:a,preventDefault:b.noop,stopPropagation:function(){this.stop=!0}};b.extend(i,d);for(;a&&1==a.nodeType&&!i.stop;a=a.parentNode){var j=a[h];if(j){var k=g[j];if(k){var l=k.events;if(l){var m=l[c];m&&b.forEach(m,function(b){if(!i.stop)try{if(b.call)return void b.call(a,i);b.handler&&b.handler.call(a,i)}catch(c){f(c)}})}}}}},format:function(a){var d=[],e=[],f=this,g=function(a){b.forEach(a,function(a){if(b.isElement(a))return void e.push(a.tagName+"."+a.className+"#"+a.id);if(null===a)return void e.push("null");if(a===c)return void e.push("undefined");if(b.isFunction(a))return void e.push("<<FUNC>>");if(f.isPromise(a))return void e.push("<<PROMISE>>");if(b.isObject(a)){for(var h=0;h<d.length;h++)if(d[h]===a)return void e.push("**cycle**");d.push(a),e.push("{");var i=!0;return b.forEach(a,function(a,b){i?i=!1:e.push(","),e.push(b+":"),g([a])}),void e.push("}")}e.push(String(a))})};return g(a),e.join(" ")},log:function(){var a=this.format(arguments);e.info(a)},trim:function(a){return a.trim()},CloneArray:function(a){return a?a.slice?a.slice():Array.prototype.slice.call(a):a},LoadProvider:function(a){var c=g,d=a.indexOf(":");if(d>0){var e=a.substring(0,d);a=a.substring(d+1),c=b.injector(["ng","camelia.core",e])}var f=c.get(a);return f},CloneAttributes:function(a){for(var b={},c=a[0].attributes,d=0;d<c.length;d++){var e=c[d];b[e.name]=e.value}return b},isPromise:function(a){return a&&b.isFunction(a.then)},toBoolean:function(a,b){if(a===!0)return a;if(a&&a.length){var c=a.toLowerCase();return!("f"==c||"0"==c||"false"==c||"no"==c||"n"==c||"[]"==c)}return!!b},appendTextNode:function(a,b,c){if(b)for(var d=0;;){var e=b.indexOf("\n",d);if(0>e){a.appendChild(document.createTextNode(b.substring(d)));break}e>d+1&&(c||e++,a.appendChild(document.createTextNode(b.substring(d,e)))),c&&a.appendChild(document.createElement("br")),d=e+1}},setFocus:function(a){this.log("SetFocus ",a);try{a.focus()}catch(b){e.error(b)}},lang:function(a,b){return a.en[b]}}}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.core");c.factory("camelia.cmTypes",["camelia.core",function(a){var c=/cm_([a-z]*)_.*/i;return{GetCMType:function(a){if(!a||1!=a.nodeType)return null;var b=a.cm_type;if(b)return b;var d=a.id;if(!d)return null;var e=c.exec(d);if(!e)return null;var b=e[1];return b},SearchElements:function(a,b,c){for(;c;c=c.parentNode){var d=this.GetCMType(c);if(d&&(a[d]=c,d==b))break}return a},MixElementClasses:function(b,c,d){b[0]&&(b=b[0]);var e=[];b._ascending&&e.push("_ascending"),b._collapsed&&e.push("_collapsed"),b._descending&&e.push("_descending"),b._filtreable&&e.push("_filtreable"),b._filtred&&e.push("_filtred"),b._focus&&e.push("_focus"),b._mouseDown&&e.push("_mouseDown"),b._openedPopup&&e.push("_openedPopup"),b._over&&e.push("_over"),b._selected&&e.push("_selected"),b._sortable&&e.push("_sortable"),a.MixClasses(b,c,e,d)},ForEachElement:function(a,c,d){for(var e=!b.isString(c),f=a.length,g=0;f>g;g++){var h=a[g],i=this.GetCMType(h);if(i){if(e){if(!c[i])continue}else if(i!=c)continue;if(d(h,i)===!1)return!1}}},GetPreviousVisibleType:function(a,b,c,d){if(a[0]&&(a=a[0]),a.offsetHeight==a.scrollHeight)return this.GetPreviousType(b,c,d);var e=a.scrollTop,f=a.clientHeight,g=null;return this.GetPreviousType(b,c,function(a,b){return g?void 0:d&&d(a,b)!==!0?!1:void(a.offsetTop+a.offsetHeight/2-e>f||(g=a))}),g},GetPreviousType:function(a,c,d){for(var e=!b.isString(c);a;a=a.previousSibling)if(1==a.nodeType){var f=this.GetCMType(a);if(f){if(e){if(!c[f])continue}else if(f!=c)continue;if(!d||d(a,f)===!0)return a}}return null},GetNextVisibleType:function(a,b,c,d){if(a[0]&&(a=a[0]),a.offsetHeight==a.scrollHeight)return this.GetNextType(b,c,d);var e=a.scrollTop,f=(a.clientHeight,null);return this.GetNextType(b,c,function(a,b){return f?void 0:d&&d(a,b)!==!0?!1:void(a.offsetTop+a.offsetHeight/2<e||(f=a))}),f},GetNextType:function(a,c,d){for(var e=!b.isString(c);a;a=a.nextSibling)if(1==a.nodeType){var f=this.GetCMType(a);if(f){if(e){if(!c[f])continue}else if(f!=c)continue;if(!d||d(a,f)===!0)return a}}return null},SwitchOnState:function(c,d,e,f){var g="_"+e;b.forEach(d,function(b,d){var f=d+"_"+e,h=c[f];if(h&&(!b||h!=b.id)){c[f]=null;var i=document.getElementById(h);i&&i[g]&&(i[g]=!1,a.BubbleEvent(i,"cm_update"))}}),b.forEach(d,function(b,d){if(b){var f=d+"_"+e;c[f]||(c[f]=b.id,b[g]||(b[g]=!0,a.BubbleEvent(b,"cm_update")))}}),f&&f(d)},SwitchOffState:function(c,d,e,f){var g="_"+e;b.forEach(d,function(b,d){var f=d+"_"+e,h=c[f];if(h&&(!b||h!=b.id)){c[f]=null;var i=document.getElementById(h);i&&i[g]&&(i[g]=!1,a.BubbleEvent(i,"cm_update"))}}),f&&f(d)},ClearState:function(c,d,e,f){var g="_"+e,h={};b.forEach(d,function(b,d){var f=d+"_"+e,i=c[f];if(i){c[f]=null;var j=document.getElementById(i);j&&j[g]&&(j[g]=!1,h[d]=j,a.BubbleEvent(j,"cm_update"))}}),f&&f(h)}}}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.cursorProvider",["camelia.core"]);c.factory("camelia.CursorProvider",["$rootScope","camelia.core",function(a){function c(){d.constructor.call(this)}var d=a.__proto__||Object.getPrototypeOf(a);return c.CURSOR_CHANGED="cursorChanged",c.prototype=Object.create(d),b.extend(c.prototype,{constructor:c,getRowCursor:function(){var a=this._rowCursor;return a},setCursor:function(a,b){if(this._rowCursor!==a||this._columnCursor!==b){var d=this._rowCursor,e=this._columnCursor;this._rowCursor=a,this._columnCursor=b,this.$emit(c.CURSOR_CHANGED,{row:a,column:b,oldRow:d,oldColumn:e})}}}),c}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("camelia.dataModel",["camelia.core","ngResource"]);d.factory("camelia.DataModel",["$q","$rootScope","camelia.core","$injector","$resource",function(a,d,e,f,g){function h(){i.constructor.call(this),this.$parent=d}var i=d.__proto__||Object.getPrototypeOf(d),j=g(),k=j.__proto__||Object.getPrototypeOf(j);return h.DATA_MODEL_CHANGED_EVENT="dataModelChanged",h.DATA_MODEL_UPDATED_EVENT="dataModelUpdated",h.From=function(a){if(a instanceof h)return a;var c=a&&(a.__proto__||Object.getPrototypeOf(a));return c===k?f.invoke(["camelia.ResourceDataModel",function(b){return new b(a)}]):b.isArray(a)?f.invoke(["camelia.ArrayDataModel",function(b){return new b(a)}]):new h},h.prototype=Object.create(i),b.extend(h.prototype,{constructor:h,$super:i,_rowIndex:-1,installWatcher:function(a,b){var c=this;this._watcherDeRegistration=a.$watch(b,function(a){c.$emit(h.DATA_MODEL_CHANGED_EVENT,a)})},isRowAvailable:function(){return!1},getRowCount:function(){return 0},getRowData:function(){return c},getRowIndex:function(){return this._rowIndex},setRowIndex:function(a){var b=this._rowIndex;this._rowIndex=a,0>b&&a>=0&&this.$emit("begin"),b>=0&&0>a&&this.$emit("end")},$destroy:function(){i.$destroy.call(this);var a=this._watcherDeRegistration;a&&(this._watcherDeRegistration=c,a()),this._wrappedData=c,this._sorters=c,this._filters=c,this.$scope=c},getWrappedData:function(){return this._wrappedData},setWrappedData:function(a){this._wrappedData=a},setFetchProperties:function(a){this._fetchProperties=a},getFetchProperties:function(){return this._fetchProperties},setSorters:function(a){this._sorters=a},setFilters:function(a){this._filters=a},setGrouped:function(a){this._grouped=!!a},setScope:function(a){this.$scope=a},isFilterSupport:function(){return this.filterSupport},isSortSupport:function(){return this.sortSupport},isGroupSupport:function(){return this.groupSupport},toArray:function(){function b(g){for(;g;d++){f.setRowIndex(d);var g=f.isRowAvailable();if(g===!1)break;if(e.isPromise(g))return g.then(b);var h=f.getRowData();c.push(h)}return f.setRowIndex(-1),a.when(c)}var c=[],d=0,f=this,g=c;try{g=b(!0)}catch(h){throw this.setRowIndex(-1),h}return g}}),h}]),d.factory("camelia.ArrayDataModel",["camelia.DataModel",function(a){function d(b){a.prototype.constructor.call(this),this.setWrappedData(b)}return d.prototype=Object.create(a.prototype),b.extend(d.prototype,{constructor:d,$super:a.prototype,installWatcher:function(b,d){var e=this;this._watcherDeRegistration=b.$watchCollection(d,function(b,d){d!==c&&(e.setWrappedData(b),e.$emit(a.DATA_MODEL_UPDATED_EVENT,b))})},isRowAvailable:function(){var a=this.getRowIndex(),b=this.getRowCount();return a>=0&&(0>b||b>a)?!0:!1},getRowCount:function(){var a=this.getWrappedData();return a?a.length:0},getRowData:function(){if(!this.isRowAvailable())throw new Error("Invalid rowIndex ("+this.getRowIndex()+"/"+this.getRowCount()+")");var a=this.getWrappedData(),b=this.getRowIndex();return a[b]},toArray:function(){var c=this.getWrappedData();return b.isArray(c)?c:a.prototype.toArray.call(this)}}),d}]),d.factory("camelia.WrappedArrayDataModel",["camelia.ArrayDataModel","camelia.core",function(a,d){function e(b){this._dataModel=b,a.call(this,c)}return e.prototype=Object.create(a.prototype),b.extend(e.prototype,{constructor:e,$super:a.prototype,$destroy:function(){e.prototype.$super.$destroy.call(this),this._dataModel.$destroy(),this._dataModel=c},setSorters:function(a){var b=this._dataModel;b.setSorters(a),e.prototype.$super.setSorters.call(this,a)},setFilters:function(a){var b=this._dataModel;b.setFilters(a),e.prototype.$super.setFilters.call(this,a)},setGrouped:function(a){var b=this._dataModel;b.setGrouped(a),e.prototype.$super.setGrouped.call(this,a)},setScope:function(a){e.prototype.$super.setScope.call(this,a),this._dataModel.setScope(a)},isFilterSupport:function(){return e.prototype.$super.isFilterSupport.call(this)||this._dataModel.isFilterSupport()},isSortSupport:function(){return e.prototype.$super.isSortSupport.call(this)||this._dataModel.isSortSupport()},isGroupSupport:function(){return e.prototype.$super.isGroupSupport.call(this)||this._dataModel.isGroupSupport()},setFetchProperties:function(a){this._dataModel.setFetchProperties(a)},getFetchProperties:function(){return this._dataModel.getFetchProperties()},setRowIndex:function(a){this._dataModel.setRowIndex(a),e.prototype.$super.setRowIndex.call(this,a)},getRowCount:function(){var a=this.getWrappedData();return null===a?this._dataModel.getRowCount():e.prototype.$super.getRowCount.call(this)},getRowData:function(){var a=this.getWrappedData();return null===a?this._dataModel.getRowData():e.prototype.$super.getRowData.call(this)},isRowAvailable:function(){function a(a){return f=g.processParentArray(a),g.setWrappedData(f),e.prototype.$super.isRowAvailable.call(g)}function c(){var c=g._dataModel.toArray();if(d.isPromise(c))return c.then(function(b){return a(b)});if(c||(c=[]),b.isArray(c))return a(c);throw new Error("Invalid toArray return !")}var f=this.getWrappedData();if(f)return e.prototype.$super.isRowAvailable.call(this);if(null===f)return this._dataModel.isRowAvailable();if(f===!1)return!1;var g=this,h=this._dataModel.isRowAvailable();return h===!1?!1:d.isPromise(h)?h.then(function(a){return a===!1?!1:g.wrappingEnabled()?c():(g.setWrappedData(null),!0)}):this.wrappingEnabled()?c():(this.setWrappedData(null),!0)},wrappingEnabled:function(){return!1},processParentArray:function(a){return a}}),e}]),d.factory("camelia.SortedDataModel",["camelia.WrappedArrayDataModel",function(a){function c(b){a.call(this,b),this.sortSupport=!0}return c.prototype=Object.create(a.prototype),b.extend(c.prototype,{constructor:c,$super:a.prototype,processParentArray:function(a){if(!this._sorters)return a;var c=this.$scope.$new();try{b.forEach(this._sorters,function(b){c.$array=a;var d=b.expression;"orderBy:"==d&&b.column.$scope.fieldName&&(d+="'"+b.column.$scope.fieldName+"'");var e=c.$eval("$array | "+d);b.ascending||(e=e.reverse()),a=e})}finally{c.$destroy()}return a},wrappingEnabled:function(){return!this._dataModel.isSortSupport()&&this._sorters}}),c}]),d.factory("camelia.FiltredDataModel",["camelia.WrappedArrayDataModel",function(a){function c(b,c){a.call(this,b),this.filterSupport=!0,this._rowVarName=c}return c.prototype=Object.create(a.prototype),b.extend(c.prototype,{constructor:c,$super:a.prototype,processParentArray:function(a){var c=this._filters;if(!c||!c.length)return a;var d=c.length,e=this._rowVarName,f=[],g=this.$scope.$new(),h=this;try{b.forEach(a,function(a){g.$row=a,e&&(g[e]=a);for(var b=0;d>b;b++){var i=c[b];if(i(g,h)===!1)return}f.push(a)})}finally{g.$destroy()}return f},wrappingEnabled:function(){return!this._dataModel.isFilterSupport()&&this._filters}}),c}]),d.factory("camelia.GroupedDataModel",["camelia.WrappedArrayDataModel","camelia.core",function(a,d){function e(b,c,d){a.call(this,b),this.groupSupport=!0,this._groupProvider=c,this._groups=[],this._groupCount=[],this._rowVarName=d,this._groupValues=[]}return e.prototype=Object.create(a.prototype),b.extend(e.prototype,{constructor:e,$super:a.prototype,getGroup:function(a,b){var c=this._groupProvider.$scope.valueRawExpression;a.$row=b,this._rowVarName&&(a[this._rowVarName]=b);var d=a.$eval(c);return d},getGroupCount:function(a){var b=this._groups.indexOf(a);return 0>b?-1:this._groupCount[b]},getGroupValues:function(a){var b=this._groups.indexOf(a);return 0>b?-1:this._groupValues[b]},processParentArray:function(a){if(!this._grouped)return a;var c=this.$scope.$new();try{var e=this,f=this._groups,g=this._groupCount,h=this._groupValues;b.forEach(a,function(a){var b=e.getGroup(c,a),d=f.indexOf(b);0>d&&(d=f.length,g[d]=0),f[d]=b,g[d]++,h[d]||(h[d]=[]),h[d].push(a)});var i=d.CloneArray(f),j=this._groupProvider.$scope.sorter;j&&(c.$array=i,i=c.$eval("$array | "+j));var k=[];return b.forEach(i,function(a){var b=f.indexOf(a);k=k.concat(h[b])}),k}finally{c.$destroy()}},$destroy:function(){e.prototype.$super.$destroy.call(this),this._groupProvider=c,this._groups=c,this._groupCount=c,this._rowVarName=c,this._groupValues=c},wrappingEnabled:function(){return!this._dataModel.isGroupSupport()&&this._grouped}}),e}]),d.factory("camelia.ResourceDataModel",["$q","camelia.DataModel",function(a,d){function e(a,c){d.call(this),b.extend(this,b.extend(f,c||{})),this.$resource=a,this._sessionId=0,this._rowCount=-1,this._cache=[];var e=this;this.$on("begin",function(){e._sessionId=g++}),this.$on("end",function(){e._sessionId=-1})}var f={pageSize:20,offsetMod:10,offsetParameter:"offset",countParameter:"count",sorterParameter:"sorter",filterParameter:"filter",actionName:"query",keepCache:!1},g=0;return e.prototype=Object.create(d.prototype),b.extend(e.prototype,{constructor:e,$super:d.prototype,isRowAvailable:function(){var d=this.getRowIndex(),e=this._cache;if(e[d]!==c)return!0;if(this._rowCount>=0&&d>=this._rowCount)return!1;var f=a.defer(),g=this.getFetchProperties(),h=d,i=this.pageSize,j=!1,k=g&&g.rows;if(k>0&&h%k==0&&(i=k,j=!0),!j&&this.offsetMod&&(h%=this.offsetMod),this._keepCache)for(var l=h+i-1;l>h&&e[l]!==c;l--)i--;else e=[],this._cache=e;var m=this._sessionId,n=this.actionName,o={};if(o[this.offsetParameter]=h,o[this.countParameter]=i,this._sorters&&this.sorterParameter){var p=this._sorters[0],q=p.expression||p.column.$scope.fieldName;p.ascending||(q+=":desc"),o[this.sorterParameter]=q,this.sortSupport=!0}var r=this._filters;if(r&&this.filterParameter){var s=[];o[this.filterParameter]=s,b.forEach(r,function(a){if(a.toJSON){var b=a.toJSON();b&&s.push(b)}}),this.filterSupport=!0}var t=this;return this.$resource[n].call(this.$resource,o,function(a){if(t._sessionId!=m)return f.reject("Session canceled");for(var b=0;b<a.length;b++)e[b+h]=a[b];a.length<i&&(t._rowCount=h+a.length),f.resolve(typeof e[d]!==c)},function(a){return f.reject("Query error: "+a)}),f.promise},getRowData:function(){var a=this.getRowIndex();return this._cache[a]},getRowCount:function(){return this._rowCount},setSorters:function(a){this._cache=[],this._rowCount=-1,e.prototype.$super.setSorters.call(this,a)},setFilters:function(a){this._cache=[],this._rowCount=-1,e.prototype.$super.setFilters.call(this,a)}}),e}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.core");c.factory("camelia.EventTarget",["$log","$exceptionHandler",function(a,b){var c=function(a,b){this.$$listeners={},this.$$getParentEventTarget=b};return c.prototype={on:function(a,b){var c=this.$$listeners[a];return c||(this.$$listeners[a]=c=[]),c.push(b),function(){c[c.indexOf(b)]=null}},emit:function(a){for(var c,d={name:a,target:this,stopPropagation:function(){c=!0},preventDefault:function(){d.defaultPrevented=!0},defaultPrevented:!1},e=concat([d],arguments,1),f=this;f;){var g=f.$$listeners[a];if(g){d.source=f;for(var h=g.length,i=0;h>i;i++)if(g[i])try{g[i].apply(null,e)}catch(j){b(j)}else g.splice(i,1),i--,h--;if(c)return d}f=f.$$getParentEventTarget&&f.$$getParentEventTarget()}return d}},c}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.key",[]);c.factory("camelia.Key",[function(){return{VK_CANCEL:3,VK_HELP:6,VK_BACK_SPACE:8,VK_TAB:9,VK_CLEAR:12,VK_RETURN:13,VK_ENTER:14,VK_SHIFT:16,VK_CONTROL:17,VK_ALT:18,VK_PAUSE:19,VK_CAPS_LOCK:20,VK_ESCAPE:27,VK_SPACE:32,VK_PAGE_UP:33,VK_PAGE_DOWN:34,VK_END:35,VK_HOME:36,VK_LEFT:37,VK_UP:38,VK_RIGHT:39,VK_DOWN:40,VK_PRINTSCREEN:44,VK_INSERT:45,VK_DELETE:46,VK_SEMICOLON:59,VK_EQUALS:61,VK_CONTEXTMENU:93,VK_NUMPAD0:96,VK_NUMPAD1:97,VK_NUMPAD2:98,VK_NUMPAD3:99,VK_NUMPAD4:100,VK_NUMPAD5:101,VK_NUMPAD6:102,VK_NUMPAD7:103,VK_NUMPAD8:104,VK_NUMPAD9:105,VK_MULTIPLY:106,VK_ADD:107,VK_SEPARATOR:108,VK_SUBTRACT:109,VK_DECIMAL:110,VK_DIVIDE:111,VK_F1:112,VK_F2:113,VK_F3:114,VK_F4:115,VK_F5:116,VK_F6:117,VK_F7:118,VK_F8:119,VK_F9:120,VK_F10:121,VK_F11:122,VK_F12:123,VK_NUM_LOCK:144,VK_SCROLL_LOCK:145,VK_COMMA:188,VK_PERIOD:190,VK_SLASH:191,VK_BACK_QUOTE:192,VK_OPEN_BRACKET:219,VK_BACK_SLASH:220,VK_CLOSE_BRACKET:221,VK_QUOTE:222,KF_SHIFT:1,KF_CONTROL:2,KF_ALT:4,KF_META:8}}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.pagerRegistry",["camelia.core"]);c.factory("camelia.pagerRegistry",["$log","$q","camelia.core",function(a,c,d){function e(){b.forEach(h,function(a,b){for(var c=0;c<a.length;){var d=a[c];document.getElementById(d.id)?c++:(d.deferred.reject("Pager garbaged !"),a.splice(c,1))}a.length||delete h[b]})}function f(a,b){e();var d=h[b];d||(d=[],h[b]=d);var f=c.defer();return d.push({id:a,deferred:f}),f.promise}function g(a){e(),1==a.nodeType&&(a=a.id);var c=h[a];if(c){delete h[a];var f=document.getElementById(a);if(f){d.Assert(f&&1==f.nodeType,"pagerRegistry","Invalid element type ",f);var g=b.element(f).data("cm_component");d.Assert(g&&g.$scope,"pagerRegistry","Invalid component ",g),b.forEach(c,function(a){var b=a.deferred;b.resolve(g)})}}}var h=document._camelia_pagerRegistry;return h||(h={},document._camelia_pagerRegistry=h),{waitTarget:f,declareTarget:g}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("camelia.selectionProvider",["camelia.core"]);d.factory("camelia.SelectionProvider",["$rootScope","$injector",function(a,d){function e(){f.constructor.call(this),this.$parent=a}var f=a.__proto__||Object.getPrototypeOf(a);return e.SELECTION_CHANGING_EVENT="selectionChanging",e.SELECTION_CHANGED_EVENT="selectionChanged",e.SELECTION_SET_EVENT="selectionSet",e.From=function(a){var e=d.invoke(["camelia.ArraySelectionProvider",function(a){return a}]);return new e(a===c?[]:b.isArray(a)?a:[a])},e.prototype=Object.create(f),b.extend(e.prototype,{constructor:e,_lock:!1,get:function(){return null},getFirstElement:function(){return null},set:function(a){if(a===c||b.isArray(a)||(a=arguments),!this._lock){var d=this;return this.run(function(){return d._processSet(a)})}return this._processSet(a)},_processSet:function(){return-1},add:function(a){if(b.isArray(a)||(a=arguments),!this._lock){var c=this;return this.run(function(){return c._processAdd(a)})}return this._processAdd(a)},_processAdd:function(){return-1},remove:function(a){if(b.isArray(a)||(a=arguments),!this._lock){var c=this;return this.run(function(){return c._processRemove(a)})}return this._processRemove(a)},_processRemove:function(){return-1},clear:function(){if(!this._lock){var a=this;return this.run(function(){return a._processClear()})}return this._processClear()},_processClear:function(){return-1},run:function(a){var b=this._lock;b||(this._lock=!0,this._startLock());var c;try{c=a()}finally{b||(this._lock=b,this._endLock())}return c},_startLock:function(){this.$broadcast("startLock")},_endLock:function(){this.$broadcast("endLock")},contains:function(){return!1},containsAll:function(){return!1},count:function(){return-1}}),e}]),d.factory("camelia.ArraySelectionProvider",["camelia.core","camelia.SelectionProvider",function(a,d){function e(a){d.prototype.constructor.call(this),this._array=a}function f(a,c,d,e,f){f&&f.length&&b.forEach(f,function(b){if(e){var f=e.indexOf(b);f>=0&&e.splice(f,1)}if(d){var g=d.indexOf(b);if(g>=0)return void d.splice(g,1)}a&&a.indexOf(b)<0&&(a.push(b),c&&c.indexOf(b)<0&&c.push(b))})}return e.prototype=Object.create(d.prototype),b.extend(e.prototype,{constructor:e,_array:[],get:function(){return this._array},getFirstElement:function(){var a=this.get();return a&&a.length?a[0]:c},_processList:function(b){var c=this._array;c||(c=[],this._array=c),this._targetArray||(this._targetArray=this._array?a.CloneArray(this._array):[],this._added=[],this._removed=[]);var d=this._added.length,e=this._removed.length;return b.call(this),this._added.length-d+(e-this._removed.length)},_processSet:function(b){return this._processList(function(){return f(this._removed,null,this._added,null,this._targetArray),b&&b.length?(this._targetArray=a.CloneArray(b),void f(this._added,null,this._removed,null,this._targetArray)):void(this._targetArray=[])})},_processAdd:function(a){return this._processList(function(){f(this._added,this._targetArray,this._removed,null,a)})},_processRemove:function(a){return this._processList(function(){f(this._removed,null,this._added,this._targetArray,a)})},_processClear:function(){return this._processList(function(){this._removed=a.CloneArray(this._array),this._added=[],this._targetArray=[]})},contains:function(a){var b=this._array;return b?b.indexOf(a)>=0:!1},containsAll:function(a){if(!b.isArray(a)){if(b.isObject(a))return this.contains(a);throw new Error("Invalid paramater for containsAll(<array>) method")}var c=this._array;if(!c)return!1;for(var d=0;d<a.length;d++)if(c.indexOf(a[d])<0)return!1;return!0},count:function(){return this._array?this._array.length:0},_endLock:function(){d.prototype._endLock.call(this);var a=this._array||[],b=this._targetArray||[];this._targetArray=c;var e=this._added||[];this._added=c;var f=this._removed||[];this._removed=c;var g=!!this._clearAll;if(this._clearAll=c,e.length||f.length||g){var h={oldSelection:a,newSelection:b,added:e,removed:f,clearAll:g},i=this.$emit(d.SELECTION_CHANGING_EVENT,h);i.defaultPrevented||(this._array=b.slice(),this.$emit(d.SELECTION_SET_EVENT,h),this.$emit(d.SELECTION_CHANGED_EVENT,h))}}}),e}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.selectionStrategy",["camelia.core"]);c.factory("camelia.SelectionStrategy",["$rootScope","$injector",function(a,c){function d(b){e.constructor.call(this),this.$parent=a,this._cardinality=d._GetCardinality(b)}var e=a.__proto__||Object.getPrototypeOf(a);return d.BASE_CHANGED_EVENT="baseChanged",d.OPTIONAL="optional",d.ZEROMANY="zeroMany",d.ONE="one",d.ONEMANY="oneMany",d._GetCardinality=function(a){switch(a.toLowerCase()){case"optional":case"?":return 0;case"zeromany":case"*":return 2;case"one":case"1":return 1;case"onemany":case"+":return 3}throw new Error("Invalid '"+a+"' cardinality")},d.CreateDefault=function(a){return c.invoke(["camelia.WinSelectionStrategy",function(b){return new b(a)}])},d.prototype=Object.create(e),b.extend(d.prototype,{constructor:d,getBase:function(){return null},select:function(){return null}}),d}]),c.factory("camelia.WinSelectionStrategy",["camelia.SelectionStrategy",function(a){var c=function(b){a.prototype.constructor.call(this,b)};return c.prototype=Object.create(a.prototype),b.extend(c.prototype,{constructor:c,getBase:function(){return this._base},select:function(b,c,d,e,f,g){var h=e&&e.type&&!e.type.indexOf("key");if(!h||!e.ctrlKey||g){if(1==this._cardinality)return this._base=d,this.$emit(a.BASE_CHANGED_EVENT,d),void b.set(c);if(e&&e.shiftKey){var i=f(this.getBase());if(i)return e.ctrlKey?void b.add(i):void b.set(i)}if(e&&e.ctrlKey){var j=b.count();if(b.containsAll(c)){if(3==this._cardinality&&2>j)return;return void b.remove(c)}if(0!=this._cardinality)return void b.add(c)}this._base=d,this.$emit(a.BASE_CHANGED_EVENT,d),b.set(c)}}}),c}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.criteria",["camelia.i18n.criteria"]),d=0;c.factory("camelia.criteria.Criteria",["$log",function(){var a=function(a,b,c){var e=a.id;e||(e="cm_criteria_"+d++),this.id=e,this.name=c.name};return a.prototype={contributeFilters:function(){return[]},filterData:function(){return!1}},a}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.criteria");c.factory("camelia.criteria.Alphabetic",["$log","camelia.core","camelia.criteria.Criteria","camelia.i18n.criteria",function(a,c,d,e){var f=function(a,b,c){d.call(this,a,b,c),this.type="Alphabetic"};return f.prototype=Object.create(d.prototype),b.extend(f.prototype,{contributeFilters:function(){var a=[];b.forEach(["A-D","E-K","L-P","Q-Z","0-9"],function(b){var c=new RegExp("^["+b+"]","i");a.push({name:b,regExp:c,id:"alphabetic_"+b,toJSON:function(){return{startsWith:b}}})});var d=new RegExp("^[^A-Z0-9]","i");return a.push({name:c.lang(e,"alphabetic_others"),regExp:d,id:"alphabetic_OTHERS",toJSON:function(){return{others:!0}}}),a},filterData:function(a,b){var c=!1;if("string"!=typeof b)return c;for(var d=0;d<a.length;d++){var e=a[d];if(e.enabled&&e.regExp.test(b))return!c}return c}}),f}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("camelia.criteria");d.factory("camelia.criteria.MinMax",["$log","camelia.criteria.Criteria",function(a,d){var e=function(a,c,e){function f(a){var c=e[a];b.isString(c)&&("="==c.charAt(0)&&(c=c.substring(1),g["_"+a+"Eq"]=!0),g["_"+a]=parseFloat(c))}d.call(this,a,c,e),this.type="MinMax",!e.min&&e.value&&(e.min=e.value);var g=this;f("min"),f("max"),this._false="true"==e.reverse};return e.prototype=Object.create(d.prototype),b.extend(e.prototype,{contributeFilters:function(){var a=this;return[{name:this.name,toJSON:function(){return{min:a._min,minEq:a._minEq,max:a._max,maxEq:a._maxEq,reverse:a._false}}}]},filterData:function(a,d){var e=this._false;if(0==b.isNumber(d))return e;var f=this._min;if(f!==c&&(!this._minEq&&f>=d||f>d))return e;var g=this._max;return g!==c&&(!this._maxEq&&d>=g||d>g)?e:!e}}),e}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.criteria");c.factory("camelia.criteria.Number",["$log","camelia.criteria.Criteria",function(a,c){var d=function(a,b,d){c.call(this,a,b,d),this.type="Number";var e=d.value;if(!e)throw new Error("You must specify value attribute");"true"==d.integer?(this._integer=!0,e=parseInt(e,10)):e=parseFloat(e),this._value=e,this._false="true"==d.reverse};return d.prototype=Object.create(c.prototype),b.extend(d.prototype,{contributeFilters:function(){var a=this;return[{name:this.name,toJSON:function(){return{value:a._value,reverse:a._false}}}]},filterData:function(a,c){var d=this._false;return 0==b.isNumber(c)?d:(this._integer&&(c=Math.floor(c)),this._value===c?!d:d)}}),d}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.criteria");c.factory("camelia.criteria.RegExp",["$log","camelia.criteria.Criteria",function(a,c){var d=function(a,b,d){c.call(this,a,b,d),this.type="RegExp";var e=d.value;if(!e)throw new Error("You must specify value attribute");var f=d.modifiers||"";"true"==d.ignoreCase&&(f+="i"),"true"==d.global&&(f+="g"),this._false="true"==d.reverse,this._regexp=new RegExp(e,f)};return d.prototype=Object.create(c.prototype),b.extend(d.prototype,{contributeFilters:function(){var a=this;return[{name:this.name,toJSON:function(){return{regExp:a._regExp,reverse:a._false}}}]},filterData:function(a,b){var c=this._false;if("string"!=typeof b)return c;var d=this._regexp;return d.test(b)?!c:c}}),d}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.criteria");c.factory("camelia.criteria.StartsWith",["$log","camelia.criteria.Criteria",function(a,c){var d=function(a,b,d){c.call(this,a,b,d),this.type="StartsWidth";var e=d.value;if(!e)throw new Error("You must specify value attribute");var f="";"true"==d.ignoreCase&&(f+="i",this._ignoreCase=!0),this._value=e,this._regExp=new RegExp("^["+e+"]",f),this._false="true"==d.reverse};return d.prototype=Object.create(c.prototype),b.extend(d.prototype,{contributeFilters:function(){var a=this;return[{name:this.name,toJSON:function(){return{startsWidth:a._value,ignoreCase:!!a._ignoreCase,reverse:a._false}}}]},filterData:function(a,b){{var c=this._false;this._regExp}return rexExp.test(b)?!c:c}}),d}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.criteria");c.factory("camelia.criteria.Type",["$log","camelia.criteria.Criteria",function(a,c){var d=function(a,b,d){c.call(this,a,b,d),this.type="Type";var e=d.value;if(!e)throw new Error("You must specify value attribute");this._value=e,this._false="true"==d.reverse};return d.prototype=Object.create(c.prototype),b.extend(d.prototype,{contributeFilters:function(){var a=this;return[{name:this.name,toJSON:function(){return{type:a._value,reverse:a._false}}}]},filterData:function(a,b){var c=this._false;return typeof b==this._value?!c:c}}),d}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("camelia.components.grid",["camelia.core","camelia.dataModel","camelia.cursorProvider","camelia.selectionProvider","camelia.selectionStrategy","camelia.pagerRegistry"]);d.value("cm_grid_rendererProviderName","camelia.renderers.grid:camelia.renderers.GridProvider"),d.value("cm_grid_dataModelProviderName","");
var e=0,f=!1;d.factory("camelia.components.DataGrid",["$log","$injector","$interpolate","$q","camelia.core","camelia.SelectionStrategy","camelia.SelectionProvider","camelia.CursorProvider","cm_grid_dataModelProviderName","cm_grid_rendererProviderName","camelia.pagerRegistry","camelia.DataModel",function(a,d,g,h,i,j,k,l,m,n,o,p){var q=function(a,b,d){this.$scope=a,this.directiveInterpolate=d||g,b.data("cm_component",this);var h=a.id;h||(h="cm_grid_"+e++),this.id=h,this.readyState="uninitialized";var o=a.rendererProvider;if(!o){var p=a.rendererProviderName||n;o=i.LoadProvider(p)}this.rendererProvider=o;var q=a.dataModelProvider;if(!q){var r=a.dataModelProviderName||m;r&&(q=i.LoadProvider(r))}this.dataModelProvider=q,this.$scope.$watchCollection("value",function(b){a.$emit("valueChanged",b)}),this.cursorProvider=new l;var s=a.selectionProvider;if(!s){var t=i.toBoolean(a.selectable)||a.selectionCardinality;t&&(s=k.From(a.selection),a.$watch("selection",function(){try{f=!0,s.set(a.selection)}finally{f=!1}}))}this.selectionProvider=s,s&&(s.$on("selectionSet",function(b,c){a.selection=c.newSelection,f||a.$apply()}),s.$on(k.SELECTION_CHANGED_EVENT,function(b,c){b.targetScope!==a&&a.$broadcast(k.SELECTION_CHANGED_EVENT,{target:self,selection:c.newSelection,sourceEvent:c})}));var u=a.selectionStrategy;!u&&s&&(u=j.CreateDefault(a.selectionCardinality||"*")),this.selectionStrategy=u,this.cursorProvider&&(a.$watch("cursor",function(){if(b!==c&&null!==b)try{f=!0;var b=a.cursor;self.cursorProvider.setCursor(b)}finally{f=!1}}),this.cursorProvider.$on(l.CURSOR_CHANGED,function(b,c){a.cursor=c.row,f||a.$apply()}))};return q.prototype={getCursorValue:function(){var a=this.selectionStrategy;return a?a.getCursor():null},construct:[function(){var a=this.$scope;this.constructing=!0,this.element=null,this.readyState="constructing";var c=b.element(document.createDocumentFragment()),d={$scope:a,$interpolate:this.directiveInterpolate,dataGrid:this,columns:a.columns,selectionProvider:this.selectionProvider,selectionStrategy:this.selectionStrategy,cursorProvider:this.cursorProvider,groupProviders:a.groupProviders},e=this,f=new this.rendererProvider(d);this.gridRenderer=f,f.$scope.$watch("first",function(a,c){!b.isNumber(a)||a==c||0>a&&0>c||"complete"==e.readyState&&f.updateData(!1,!1)}),f.$scope.$watch("rows",function(a,c){!b.isNumber(a)||a==c||0>a&&0>c||"complete"==e.readyState&&f.updateData(!1)});var g=f.render(c);return i.isPromise(g)||(g=h.when(g)),g.then(function(a){return a[0]&&(a=a[0]),e.readyState="complete",e.element=a,o.declareTarget(a),e._updateDataModel(f.$scope.value),f.$scope.$on("valueChanged",function(a,b){e._updateDataModel(b)}),c},function(){return e.readyState="error",c})}],_updateDataModel:function(a){var b=this.gridRenderer,d=b.dataModel;d&&(b.dataModel=c,d.$destroy());var e=this.normalizeDataModel(a);i.isPromise(e)||(e=h.when(e));var f=this;e.then(function(a){b.dataErrored=!1,b.dataModel=a,a&&(a.$on(p.DATA_MODEL_CHANGED_EVENT,function(a,b){f._updateDataModel(b)}),a.$on(p.DATA_MODEL_UPDATED_EVENT,function(){b.updateData()})),b.updateData()},function(){b.dataErrored=!0,b.dataModel=null,b.updateData()})},normalizeDataModel:function(a){var b=this.dataModelProvider;return b?new b(a):p.From(a)},getCurrentPositions:function(){return{first:this.first||0,rows:this.rows||0,rowCount:this.rowCount||0,maxRows:this.maxRows||0}},setFirst:function(a){var b=this;this.$scope.$apply(function(){b.$scope.first=a})}},q}]),d.factory("camelia.components.DataColumn",["$log",function(){function a(a){this.$scope=a,a._component=this;var b=a.id;b||(b="cm_data_column_"+e++),this.id=b,this.visible=a.visible!==!1;var c=a.titleAlign;c&&/^(center|left|right)$/i.test(c)&&(this.titleAlign=c);var d=a.cellAlign;d&&/^(center|left|right)$/i.test(d)>=0&&(this.cellAlign=d);var f=a.width;if(f&&(f=f.trim(),f.length)){var g=parseFloat(f),h=f.indexOf("px"),i=f.indexOf("%");h>0?this.specifiedWidthPx=g:i>0&&(this.specifiedWidthPercent=g)}var j=a.minWidth;j&&j.indexOf("px")>0&&(this.minWidth=parseFloat(j));var k=a.maxWidth;k&&k.indexOf("px")>0&&(this.maxWidth=parseFloat(k))}return a.prototype={addCriteria:function(a){this._criterias||(this._criterias=[],this._criteriasContext={}),this._criterias.push(a)},removeCriteria:function(a){var b=this._criterias;if(!b)return!1;var c=b.indexOf(a);return 0>c?!1:(b.splice(c,1),!0)}},a}]),d.factory("camelia.components.DataGroup",["$log","camelia.SelectionProvider",function(a,b){function c(a){this.$scope=a,a._component=this;var c=a.id;c||(c="cm_data_group_"+e++),this.id=c;var d=a.collapsedProvider;d||(d=b.From(a.collapsedGroups),a.$watch("collapsedGroups",function(){try{f=!0,d.set(a.collapsedGroups)}finally{f=!1}})),this.collapsedProvider=d,d&&d.$on("selectionSet",function(b,c){a.collapsedGroups=c.newSelection,f||a.$apply()})}return c.prototype={getCollapsedProvider:function(){return this.collapsedProvider}},c}]),d.factory("camelia.components.GridProvider",["camelia.components.DataGrid","camelia.components.DataColumn","camelia.components.DataGroup",function(a,b,c){return{DataGrid:a,DataColumn:b,DataGroup:c}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("camelia.components.pager",["camelia.core","camelia.pagerRegistry"]);d.value("cm_pager_rendererProviderName","camelia.renderers.pager:camelia.renderers.Pager"),d.value("xcm_pager_format","{bprev} {first} {bnext}"),d.value("cm_pager_format","'first=' {first} 'last=' {last} 'rowCount=' {rowCount} 'pageCount=' {pageCount} 'pagePos=' {pagePosition} {bprev} {bnext}");var e=0;d.factory("camelia.components.PagerBase",["$log","$q","$timeout","$exceptionHandler","camelia.core","camelia.pagerRegistry",function(a,d,e,f,g,h){var i=function(a,c,e){this.$scope=a,c.data("cm_component",this);var f=a.rendererProvider;if(!f){var i=a.rendererProviderName||e;f=g.LoadProvider(i)}this.rendererProvider=f;var j=a.target;if(!j){var k=a.forElementId;if(!k)throw new Error("No target or for attribute to attach the pager !");var l=document.getElementById(k);l&&(j=b.element(l).scope()._component)}var m;j?m=d.when(j):a.forElementId&&(m=h.waitTarget(this.id,a.forElementId)),this.targetPromise=m};return i.prototype={construct:["$q",function(){this.constructing=!0,this.constructed=!1,this.element=null;var a=this;return this.targetPromise.then(function(b){g.Assert(b&&b.$scope,"pager","Invalid target component ",b),delete a.targetPromise,a.targetComponent=b;var c={pager:a,target:b,$scope:a.$scope};return a.constructFromTarget(c)},function(){return a.constructing=!1,a.constructed=!1,doc})}],constructFromTarget:function(a){var e,f=a.target,h=f.$scope,i=b.element(document.createDocumentFragment()),j=this,k=h.$on("destroy",function(){j.targetDestroyed(f),j.targetComponent=c}),l=h.$on("positionsChanged",function(a,b){return j.element?(e=c,void j.updatePositions(b)):void(e=b)});this.$scope.$on("destroy",function(){l(),k()});var m=new this.rendererProvider(a);this.pagerRenderer=m;var n=m.render(i);return g.isPromise(n)||(n=d.when(n)),n.then(function(a){j.constructing=!1,j.constructed=!0,j.element=a;var b=e;return e=c,!b&&f.getCurrentPositions&&(b=f.getCurrentPositions()),b&&j.updatePositions(b),i})},_targetDestroyed:function(){},updatePositions:function(a){this.pagerRenderer.pagerPositionsUpdate(a)}},i}]),d.factory("camelia.components.Pager",["$log","cm_pager_rendererProviderName","cm_pager_format","camelia.components.PagerBase",function(a,c,d,f){var g=function(a,b){var d=a.id;d||(d="cm_pager_"+e++),this.id=d,b.attr("id",d),f.call(this,a,b,c)};return g.prototype=Object.create(f.prototype),b.extend(g.prototype,{constructor:g,constructFromTarget:function(a){var c=this.$scope.format;b.isString(c)||(c=d),a.format=c;var e=this;return this.$scope.$watch("format",function(c){a.format=c;var f=e.pagerRenderer;if(f){var g=f.target;if(g){var h=g.getCurrentPositions();b.isString(c)||(c=d),f.format=c,e.updatePositions(h)}}}),f.prototype.constructFromTarget.call(this,a)}}),g}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.components.popup",["camelia.core"]);c.value("cm_popup_rendererProviderName","camelia.renderers.popup:camelia.renderers.Popup"),c.factory("camelia.components.popup",["$log","$q","$timeout","$exceptionHandler","camelia.core","cm_popup_rendererProviderName",function(a,b,c,d,e){var f=function(a,b,c){this.$scope=a,b.data("cm_component",this);var d=a.rendererProvider;if(!d){var f=a.rendererProviderName||c;d=e.LoadProvider(f)}this.rendererProvider=d};return f.prototype={construct:["$q",function(a){this.constructing=!0,this.constructed=!1,this.element=null;var b=this;return a.when(function(a){e.Assert(a&&a.$scope,"pager","Invalid target component ",a),b.targetComponent=a;var c={pager:b,target:a,rendererProvider:b.rendererProvider,$scope:b.$scope};return b.constructFromTarget(c)},function(){return b.constructing=!1,b.constructed=!1,doc})}],open:function(){}},f}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.renderers.grid",["camelia.dataModel","camelia.selectionProvider","camelia.cursorProvider","camelia.selectionStrategy","camelia.key","camelia.renderers.popup","camelia.components.grid"]);c.value("cm_grid_rowIndentPx",16),c.value("cm_grid_className","cm_dataGrid"),c.value("cm_grid_sizerPx",6),c.factory("camelia.renderers.GridProvider",["$log","camelia.renderers.grid.core","camelia.renderers.grid.group","camelia.renderers.grid.row","camelia.renderers.grid.table","camelia.renderers.grid.title","camelia.renderers.grid.utils",function(a,c,d,e,f,g,h){return b.forEach([d,e,f,g,h],function(a){b.extend(c.prototype,a)}),c}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("camelia.renderers.grid"),e={row:!0,group:!0},f={cell:!0,groupTitle:!0},g=300;d.factory("camelia.renderers.grid.core",["$log","$q","$window","$timeout","$exceptionHandler","camelia.core","camelia.cmTypes","cm_grid_className","cm_grid_rowIndentPx","camelia.Key","camelia.SelectionProvider","camelia.CursorProvider","camelia.renderers.FiltersPopup","cm_grid_sizerPx",function(a,d,h,i,j,k,l,m,n,o,p,q,r,s){function t(a){var b=l.SearchElements({tcell:null,title:null,cell:null,row:null,table:null,grid:null,group:null,groupExpand:null},"grid",a);return b}var u=function(a){b.extend(this,a)};return u.prototype={render:function(a){this.$scope.$emit("cm_dataGrid_rendering");var f=k.createElement(a,"div",{id:this.dataGrid.id,$cm_type:"grid"});this.container=f[0],this.$scope.$watch("style",function(a){a=a||"",f.attr("style",a)});var g=this;this.$scope.$watch("className",function(){g.gridStyleUpdate(f)});var i=this.$scope.tabIndex;(!i||0>i)&&(i=0),this.tabIndex=i,this.rowIndent=0,this.setupGroupProviders(),this.cursorProvider.$on(q.CURSOR_CHANGED,function(a,d){var f=g._selectionSourceEvent;if(d.oldRow){var h=g.getElementFromValue(d.oldRow,e);h&&h._cursor&&(h._cursor=c,k.BubbleEvent(h,"cm_update"))}if(d.row){var i=g.getElementFromValue(d.row,e);i&&!i._cursor&&(i._cursor=!0,k.BubbleEvent(i,"cm_update"))}var j=g.selectionProvider;if(j){var l=d.row,m=l;if(g.groupProviders){var n=g.getElementFromValue(l,"group");n&&(m=b.element(n).data("cm_rowValues"))}j.run(function(){g.selectionStrategy.select(j,m,l,f,function(a){return g._computeRowRangeFromCursor(l,a)})})}}),f.on("mouseover",this._onMouseOver()),f.on("mouseout",this._onMouseOut()),f.on("mousedown",this._onMouseDown()),f.on("dblclick",this._onDoubleClick()),f.on("click",this._onSimpleClick()),f.on("mouseup",this._onMouseUp()),f.on("keydown",this._onKeyPress()),this._focusListener=this._onFocus(),f[0].addEventListener("focus",this._focusListener,!0),this._blurListener=this._onBlur(),f[0].addEventListener("blur",this._blurListener,!0),this.$scope.$on("$destroy",function(){var a=g._focusListener;a&&(g._focusListener=c,f[0].removeEventListener("focus",a,!0)),a=g._blurListener,a&&(g._blurListener=c,f[0].removeEventListener("blur",a,!0))}),f.on("cm_update",this._onGridStyleUpdate()),this.$scope.$emit("cm_dataGrid_title_rendering");var j=this.titleRenderer(f);return k.isPromise(j)||(j=d.when(j)),j.then(function(a){return g.$scope.$emit("cm_dataGrid_title_rendered"),g._title=a,g.$scope.$emit("cm_dataGrid_body_rendering"),g._monitorPositions(function(){var a=b.element(document.createDocumentFragment()),c=g.tableRenderer(a);k.isPromise(c)||(c=d.when(c)),c.then(function(c){g._body=c,g._hideBody(),f.append(a),g.$scope.$emit("cm_dataGrid_body_rendered");var e=b.element(h),i=g._onResize();e.on("resize",i),g.$scope.$on("$destroy",function(){e.off("resize",i)});var j=g.gridLayout();k.isPromise(j)||(j=d.when(j)),j.then(function(){g.$scope.$emit("cm_dataGrid_rendered");var a=g.selectionProvider;a&&a.$on(p.SELECTION_CHANGED_EVENT,g._onSelectionChanged()),g._gridReady(f),g.$scope.$emit("cm_dataGrid_ready")})})}),f})},setupGroupProviders:function(){this.selectedGroupProvider=null;var a=this.groupProviders;if(a)for(var b=0;b<a.length;b++){var c=a[b];if(!k.toBoolean(c.disabled)){this.selectedGroupProvider=c;break}}if(this.selectedGroupProvider){this.rowIndent=1;var d=this;this.selectedGroupProvider.collapsedProvider.$on(p.SELECTION_CHANGED_EVENT,d._onCollapsedChanged())}},_gridReady:function(a,b){var c,d;if(this.focusCellId&&(d=document.getElementById(this.focusCellId),d&&(c=d.parentNode)),!c&&this.selectionProvider){var e=this.selectionProvider.getFirstElement();e&&(c=this.getElementFromValue(e,"row"))}if(!c){var g=this.tableTBody,c=l.GetNextType(g.firstChild,"row");if(!c)return!1}if(!d){var d=l.GetNextType(c.firstChild,f);if(!d)return!1}return b?d.getBoundingClientRect().width?(k.setFocus(d),!0):(i(function(){k.setFocus(d)},50,!1),!0):(this._setCursor(d),!0)},_setCursor:function(a){k.log("SetCursor ",a);var c=this.focusCellId;if(c&&(!a||a.id!=c)){this.focusCellId=null;var d=document.getElementById(c);d&&(d.tabIndex=-1)}if(a&&(this.focusCellId=a.id,a.tabIndex=this.tabIndex,this.cursorProvider)){var e=a.parentNode,f=b.element(e).data("cm_value");this.registerElement(e,f);var g=a.cm_lindex,h=this.columns[g];this.cursorProvider.setCursor(f,h)}},gridStyleUpdate:function(a){var b=m.split(" "),c=this.$scope.className;return c&&b.push(c),l.MixElementClasses(a,b)},gridLayout:function(){var c=this.container;if(this.layoutState="uninitialized",a.debug("GridLayout beginning (containerSize="+this._containerSizeSetted+")"),!this._containerSizeSetted){var e=this.container.style;if(e.width||e.height){var f=this.container.getBoundingClientRect();if(f.height&&f.width){this._containerSizeSetted=!0;var g=this.titleViewPort.getBoundingClientRect(),h=this.tableViewPort.style;h.width=f.width+"px",h.height=f.height-g.height+"px"}}else this._containerSizeSetted=!0}var j=this,l=this.tableViewPort.getBoundingClientRect();if(!l||l.width<1&&l.height<1)return a.debug("No bounding client rect ",l,"  => timeout 10ms"),this._hideBody(),i(function(){j.gridLayout()},10,!1);if(this.gridWidth==l.width&&this.gridHeight==l.height)return a.debug("Begin layout : Already done"),j._alignColumns(!0),j._showBody(),this.layoutState="complete",!0;a.debug("Begin layout to "+l.width+","+l.height),this.gridWidth=l.width,this.gridHeight=l.height,this.$scope.$emit("cm_dataGrid_layout_begin");var m=b.element(c),n=this.titleLayout(m,l.width);return k.isPromise(n)||(n=d.when(n)),n.then(function(){j.layoutState="titleDone";var a=j.tableLayout(m,l.width,l.height);k.isPromise(a)||(a=d.when(a)),a.then(function(){j.layoutState="bodyDone",j._alignColumns(!0),j._showBody();var a=j._cursor;if(a){for(var b=a.parentNode;b&&1==b.nodeType;b=b.parentNode);b&&9==b.nodeType||(a=null,j._cursor=null)}j.layoutState="complete",j.$scope.$emit("cm_dataGrid_layout_end")})})},_hasData:function(){var a=this.tableTBody;return a&&a.firstChild},_alignColumns:function(c){var d=0,e=this.rowIndent;b.forEach(this.visibleColumns,function(a){var b=a.width,f=b;!a.visibleIndex&&e&&(f-=e*n);var g=a.titleElement.style;g.width=b+"px",a.bodyColElement.style.width=c?f+"px":"auto",d+=b});var f=(this.gridWidth,0);this.hasResizableColumnVisible&&(f=s),this.rightColElement&&(this.rightColElement.style.width=f+"px",d+=f),this.tableElement.style.width=c?d+"px":"auto",this.tableElement.style.tableLayout="fixed",a.debug("AlignColumns ... total="+d+" sizer="+f)},_computeRowRangeFromCursor:function(a,c){for(var d,f,g=[],h=this.tableTBody.firstChild;h;h=h.nextSibling)if(1==h.nodeType){var i=l.GetCMType(h);if(e[i]){var j=b.element(h).data("cm_value");if(d||j!==c||(d=!0),f||j!==a||(f=!0),(d||f)&&g.push(j),d&&f)return g}}return null},_emitClick:function(a,c,d){var e=a.row;if(e){var f=b.element(e).data("cm_value"),g={grid:this.grid,event:d,row:e,rowValue:f},h=a.cell;if(h){g.cell=h;var i=h.cm_lindex;g.column=this.columns[i]}this.$scope.$emit(c,g)}},onKeyPress_Cell:function(a,d,g){function h(){if((!r||r.id==n.id)&&w.rows>0){var a=w.first-w.rows;0>a&&(a=0),w.first>a&&w.setFirst(a),r=null}}function i(){if((!r||r.id==n.id)&&w.rows>0){var a=w.first+w.rows;(w.rowCount<0||a<w.rowCount)&&w.setFirst(a),r=null}}var j,m,n=a.parentNode,p=n.parentNode,q=a.cm_lindex,r=n,s=!1,t=!1,u=!1,v=this.tableViewPort;g&&(j=b.element(g).data("cm_value"),m=this.selectedGroupProvider.getCollapsedProvider());var w=this.dataGrid;switch(d.keyCode){case o.VK_DOWN:s=!0,r=l.GetNextType(n.nextSibling,e),i();break;case o.VK_PAGE_DOWN:s=!0,r=l.GetPreviousVisibleType(v,p.lastChild,e),r&&r.id==n.id&&v.scrollHeight>v.offsetHeight&&(v.scrollTop+=v.clientHeight-n.offsetHeight,r=l.GetPreviousVisibleType(v,p.lastChild,e)),i();break;case o.VK_END:s=!0,r=l.GetPreviousType(p.lastChild,e),i();break;case o.VK_UP:s=!0,r=l.GetPreviousType(n.previousSibling,e),h();break;case o.VK_PAGE_UP:s=!0,r=l.GetNextVisibleType(v,p.firstChild,e),r&&r.id==n.id&&(v.scrollTop-=v.clientHeight-n.offsetHeight,r=l.GetNextVisibleType(v,p.firstChild,e)),h();break;case o.VK_HOME:s=!0,r=l.GetNextType(p.firstChild,e),h();break;case o.VK_SPACE:s=!0,t=!0;break;case o.VK_RIGHT:if(s=!0,g)m.contains(j)&&this._toggleGroupExpand(g);else if(b.isNumber(q)){var x=this.columns[q],y=this.visibleColumns[x.visibleIndex+1];y&&(q=y.logicalIndex,u=!0)}break;case o.VK_LEFT:if(s=!0,g)m.contains(j)||this._toggleGroupExpand(g);else if(b.isNumber(q)){var x=this.columns[q];if(x.visibleIndex>0){var y=this.visibleColumns[x.visibleIndex-1];q=y.logicalIndex,u=!0}}}var z=this;if(t){var A=this.selectionStrategy;if(A){var B=b.element(r).data("cm_value");this.registerElement(r,B);var C=B;if(this.groupProviders){var g=this.getElementFromValue(C,"group");g&&(B=b.element(g).data("cm_rowValues"))}A.select(this.selectionProvider,B,C,d,function(a){return z._computeRowRangeFromCursor(C,a)},!0)}}if(r&&r.id!=n.id&&(this.registerElement(r),u=!0),u){var a=l.GetNextType(r.firstChild,f,function(a){return a.cm_lindex===c||q===c?!0:a.cm_lindex==q});a&&(this._registerSelectionEvent(d),k.setFocus(a))}s&&(d.stopPropagation(),d.preventDefault())},_onCollapsedChanged:function(){var a=this;return function(c,d){a._switchElementsFromEvent(d,"group","_collapsed",function(b,c){a.removeRowsOfGroup(c,b)},function(c){var d=b.element(c).data("cm_value");a.addRowsOfGroup(d,c)})}},_onSelectionChanged:function(){var a=this;return function(b,c){a._switchElementsFromEvent(c,"row","_selected")}},_switchElementsFromEvent:function(a,d,e,f,g){var h=a.removed.length+a.added.length,i=h>1?{}:null,j=this;a.clearAll&&!a.removed.length?this.forEachBodyElement(d,function(a){a[e]&&(a[e]=c,k.BubbleEvent(a,"cm_update"),g&&g(a))},d):b.forEach(a.removed,function(a){var b=j.getElementFromValue(a,d,i);b&&b[e]&&(b[e]=c,k.BubbleEvent(b,"cm_update"),g&&g(b))}),b.forEach(a.added,function(a){var b=j.getElementFromValue(a,d,i);b&&!b[e]&&(b[e]=!0,k.BubbleEvent(b,"cm_update"),f&&f(b,a))})},_onResizeColumnMoving:function(a,b){var c=b.clientX-this.columnMoveClientX,d=this.columnResizingWidth+c;d<a.computedMinWidth&&(d=a.computedMinWidth),a.maxWidth&&d>a.maxWidth&&(d=a.maxWidth),d!=a.width&&(a.width=d,a.specifiedWidthPx=d+"px",this._alignColumns(!0)),b.preventDefault(),b.stopPropagation()},_onResizeColumnMouseUp:function(a,b){console.log("On resize column mouse up"),this._onResizeColumnRelease(),this.$scope.$emit("cm_dataGrid_resized",a),b.preventDefault(),b.stopPropagation()},_onResizeColumnRelease:function(){console.log("On resize column release"),this.columnMouseMoveListener&&(document.removeEventListener("mousemove",this.columnMouseMoveListener,!0),this.columnMouseMoveListener=c),this.columnMouseUpListener&&(document.removeEventListener("mouseup",this.columnMouseUpListener,!0),this.columnMouseUpListener=c),this.columnResizing=c,this.columnResizingWidth=c},_onResizeColumn:function(a,c,d){console.log("On resize column "+a),this._allWidthSpecified||(this._allWidthSpecified=!0,b.forEach(this.visibleColumns,function(a){a.specifiedWidthPx=a.width+"px"})),this.$scope.$emit("cm_dataGrid_resizing",a),this.columnResizing&&this._onResizeColumnRelease();var e=this;this.columnMouseUpListener=function(b){return e._onResizeColumnMouseUp(a,b)},this.columnMouseMoveListener=function(b){return e._onResizeColumnMoving(a,b)},document.addEventListener("mousemove",this.columnMouseMoveListener,!0),document.addEventListener("mouseup",this.columnMouseUpListener,!0),this.columnResizing=!0,this.columnResizingWidth=a.width,this.columnMoveClientX=d.clientX,d.preventDefault(),d.stopPropagation()},_toggleColumnSort:function(a){this.$scope.$emit("cm_dataGrid_sorting");var d=this.sorters,e={},f=!0;d&&b.forEach(d,function(b){var d=b.column;d===a&&(f=!b.ascending);var g=d.titleElement;g&&(g._ascending=c,g._descending=c),e[d.columnId]=d});var g=[];this.sorters=g,g.push({column:a,ascending:f}),b.forEach(g,function(a){var b=a.column,c=b.titleElement,d=!!a.ascending;c._ascending=d,c._descending=!d,e[b.columnId]=b}),b.forEach(e,function(a){var b=a.titleElement;b&&k.BubbleEvent(b,"cm_update")});var h=this._refreshRows(),i=this;return h.then(function(){i.$scope.$emit("cm_dataGrid_sorted")})},_monitorPositions:function(a){var b=this.dataGrid.first,c=this.dataGrid.rows,e=this.dataGrid.rowCount,f=this.dataGrid.maxRows,g=a.call(this);k.isPromise(g)||(g=d.when(g));var h=this;return g.then(function(){var a=h.dataGrid,d=h.$scope,g=a.first,i=a.rows,j=a.rowCount,k=a.maxRows,l={first:g,rows:i,rowCount:j,maxRows:k},m=!1;b!=a.first&&(l.firstChanged=!0,m=!0,d.$emit("firstChanged",a.first)),c!=a.rows&&(l.rowsChanged=!0,m=!0,d.$emit("rowsChanged",a.rows)),e!=a.rowCount&&(l.rowCountChanged=!0,m=!0,d.rowCount=j,d.$emit("rowCountChanged",a.rowCount)),f!=a.maxRows&&(l.maxRowsChanged=!0,m=!0,d.maxRows=k,d.$emit("maxRowsChanged",a.maxRows)),m&&d.$emit("positionsChanged",l)})},updateData:function(a,b){a&&(this.first=0,this.rowCount=-1,this.maxRows=-1),b===c&&(b=!0);this._monitorPositions(function(){return this._refreshRows(b)}).then(function(){})},_hideBody:function(){var b=this.tableViewPort.style;b.width="auto",b.visibility="hidden",a.debug("Hide body")},_showBody:function(){var b=this.tableViewPort.style;b.visibility="",a.debug("Show body")},_refreshRows:function(e,f){function g(a){n&&(m.style.height="auto",q.tableViewPort.style.height="auto"),l.appendChild(j),q._showBody(),q._gridReady(m,f!==!1),q.$scope.$emit(a||"cm_dataGrid_refreshed")}function h(a){return k.isPromise(a)||(a=d.when(a)),a.then(function(){return!q.dataGrid.rowCount&&q.dataGrid.first&&i(function(){q.dataGrid.first=0},100),g()},function(a){return console.error("Catch process failed message "+a),g("cm_dataGrid_errored")},function(){})}a.debug("Refresh rows");var j=this.tableTBody,l=this.tableElement;this._hideBody(),e&&(this._naturalWidths=c,this._containerSizeSetted=c,this.gridWidth=-1,this._alignColumns(!1));var m=this.container,n=!1;if(!m.style.height||m.style.height.indexOf("px")<0){n=!0;var o=m.getBoundingClientRect();m.style.height=o.height+"px"}j.parentNode&&(l.removeChild(j),b.element(j).empty());var p=this.tableRowsRenderer(j),q=this;return h(p)},_moveColumn:function(a,e,f){var g=this.visibleColumns,h=g[e+(e>a.visibleIndex?1:0)],g=this.visibleColumns;this._lastVisibleColumn=g[g.length-1],g.splice(a.visibleIndex,1),g.splice(e,0,a);var i=0;b.forEach(g,function(a){a.beforeMovingVisibleIndex=a.visibleIndex,a.visibleIndex=i++});var j=this.moveColumnTitle(a,h);k.isPromise(j)||(j=d.when(j));var l=this;j.then(function(){var b=l.moveColumnTable(a,h);k.isPromise(b)||(b=d.when(b)),b.then(function(){l._lastVisibleColumn=c,a.beforeMovingVisibleIndex&&a.visibleIndex||l._alignColumns(!0),f!==!1&&a.buttonElement.focus()})})},_registerSelectionEvent:function(a){this._selectionSourceEvent=a;var b=this;i(function(){b._selectionSourceEvent=c},10,!1)},_toggleGroupExpand:function(a){var c=b.element(a),d=c.data("cm_value"),e=this.selectedGroupProvider.getCollapsedProvider(),f=!e.contains(d);f?e.add(d):e.remove(d)},_onTitleCellMouseDown:function(a,c){var d=a.clientX,e=b.element(c).data("cm_column");this._onTitleCellClear(),this.titleCellMoving=!0,this.titleCellMovingClientX=d,this.titleCellMovingLayerX=a.layerX;var f=this;this.titleCellMouseUpListener=function(a){return f._onTitleCellMouseUp(c,a,e)},this.titleCellMouseMoveListener=function(a){return f._onTitleCellMouseMoving(c,a,e)},document.addEventListener("mousemove",this.titleCellMouseMoveListener,!0),document.addEventListener("mouseup",this.titleCellMouseUpListener,!0)},_onTitleCellMouseMoving:function(a,b,c){var d=b.clientX-this.titleCellMovingClientX;(-20>d||d>20)&&(this.titleCellColumnMoving||(this.titleCellColumnMoving=c,this.beginMovingTitleCell(c,b,d,this.titleCellMovingLayerX))),this.titleCellColumnMoving&&this.movingTitleCell(c,b,d,this.titleCellMovingLayerX)},_onTitleCellMouseUp:function(a,c,d){var e=t(c.target);if(this.titleCellColumnMoving){var f=c.clientX-this.titleCellMovingClientX,g=this.endMovingTitleCell(d,c,f);b.isNumber(g)&&this._moveColumn(d,g)}else e.tcell&&e.tcell.id==a.id&&(e.tparams?this._showFilterPopup(d,e.tparams,c,e):a._sortable&&this._toggleColumnSort(d,c));return this._onTitleCellClear(),l.ClearState(this,e,"mouseDown"),c.stopPropagation(),!1},_showFilterPopup:function(a,b,c,d){var e=this.dataModel,f=this,g=new r(this.$scope,{},a,e,function(){var a=f._refreshRows(!1,!1);return a.then(function(){f.gridLayout(),f.$scope.$emit("cm_dataGrid_filtred")})}),f=this;g.$scope.$on("cm_popup_opened",function(){l.SwitchOnState(f,d,"openedPopup")}),g.$scope.$on("cm_popup_closed",function(){l.ClearState(f,d,"openedPopup")}),g.open({reference:b,valign:"bottom",deltaY:2})},_onTitleCellClear:function(){this.titleCellColumnMoving&&(this.endMovingTitleCell(this.titleCellColumnMoving),this.titleCellColumnMoving=c),this.titleCellMouseMoveListener&&(document.removeEventListener("mousemove",this.titleCellMouseMoveListener,!0),this.titleCellMouseMoveListener=c),this.titleCellMouseUpListener&&(document.removeEventListener("mouseup",this.titleCellMouseUpListener,!0),this.titleCellMouseUpListener=c),this.titleCellMoving=c,this.titleCellColumnMoving=c},onKeyPress_Title:function(a,c){var d=a,e=!1,f=b.element(a).data("cm_column");switch(c.keyCode){case o.VK_LEFT:e=!0,c.ctrlKey?f.visibleIndex&&this._moveColumn(f,f.visibleIndex-1):(d=l.GetPreviousType(a.previousSibling,"tcell"),d||(d=l.GetPreviousType(a.parentNode.lastChild,"tcell")));break;case o.VK_RIGHT:e=!0,c.ctrlKey?f.visibleIndex<this.visibleColumns.length-1&&this._moveColumn(f,f.visibleIndex+1):(d=l.GetNextType(a.nextSibling,"tcell"),d||(d=l.GetNextType(a.parentNode.firstChild,"tcell")));break;case o.VK_HOME:e=!0,d=l.GetNextType(a.parentNode.firstChild,"tcell");break;case o.VK_END:e=!0,d=l.GetPreviousType(a.parentNode.lastChild,"tcell");break;case o.VK_SPACE:e=!0,this._toggleColumnSort(f,c)}if(d&&d.id!=a.id){var f=b.element(d).data("cm_column");f.buttonElement.focus()}e&&(c.stopPropagation(),c.preventDefault())},_onResize:function(){a.debug("On resize ...");var b=this;return function(){try{b.gridLayout()}catch(a){j(a,"Exception while resizing")}}},_onMouseOver:function(){var a=this;return function(b){var c=b.target;if(!a.columnResizing&&!a.titleCellMoving){var d=t(c);l.SwitchOnState(a,d,"over")}}},_onMouseOut:function(){var a=this;return function(b){var c=b.relatedTarget,d=t(c);l.SwitchOffState(a,d,"over")}},_onFocus:function(){var a=this;return function(b){var c=b.target,d=t(c);k.log("Grid.OnFocus ",c,d),l.SwitchOnState(a,d,"focus",function(b){var c=b.cell||b.groupTitle;c&&a._setCursor(c)})}},_onBlur:function(){var a=this;return function(b){var c=b.relatedTarget,d=t(c);l.SwitchOffState(a,d,"focus")}},_onDoubleClick:function(){var a=this;return function(b){var d=b.target,e=t(d);if(e.group){var f=a._groupSimpleClickPromise;return f&&(a._groupSimpleClickPromise=c,i.cancel(f)),void a._toggleGroupExpand(e.group)}a._emitClick(e,"RowDoubleClick",b)}},_onSimpleClick:function(){var a=this;return function(b){var c=b.target,d=t(c);a._emitClick(d,"RowClick",b)}},_onMouseDown:function(){var a=this;return function(d){var e=d.target,f=t(e);l.SwitchOnState(a,f,"mouseDown",function(e){var f=e.tsizer;if(f){var h;if(e.tcell){var j=b.element(e.tcell).data("cm_column"),k=j.visibleIndex;h=a.visibleColumns[k-1]}else h=a.visibleColumns[a.visibleColumns.length-1];return a._onResizeColumn(h,f,d),!1}var l=e.groupExpand;if(l)return a._toggleGroupExpand(e.group),!1;var m=e.row;m&&(a.registerElement(m),a._registerSelectionEvent(d,!1));var n=e.tcell;if(n)return a._onTitleCellMouseDown(d,n),d.stopPropagation(),!1;if(e.group){var o=a._groupSimpleClickPromise;return o&&(a._groupSimpleClickPromise=c,i.cancel(o)),a._groupSimpleClickPromise=i(function(){a._groupSimpleClickPromise=c,a.registerElement(e.group),a._registerSelectionEvent(d,!1),e.groupTitle&&e.groupTitle.focus()},g,!1),d.stopPropagation(),d.preventDefault(),!1}return d.stopPropagation(),!1})}},_onMouseUp:function(){var a=this;return function(){var b=t();l.ClearState(a,b,"mouseDown",function(){})}},_onKeyPress:function(){var a=this;return function(b){var c=b.target,d=t(c);return d.tcell?a.onKeyPress_Title(d.tcell,b):d.cell?a.onKeyPress_Cell(d.cell,b):d.groupTitle?a.onKeyPress_Cell(d.groupTitle,b,d.group):void 0}},_onGridStyleUpdate:function(){var a={grid:"gridStyleUpdate",table:"tableStyleUpdate",row:"rowStyleUpdate",cell:"cellStyleUpdate",title:"titleStyleUpdate",tcell:"titleCellStyleUpdate",group:"groupStyleUpdate"},c=this;return function(d){var e=d.relatedTarget,f=l.GetCMType(e);if(f){var g=b.element(e),h=c[a[f]];return h?(h.call(c,g),void d.stopPropagation()):void 0}}}},u}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("camelia.renderers.grid");d.factory("camelia.renderers.grid.group",["$log","camelia.core","camelia.cmTypes",function(a,d,e){var f=0;return{groupRenderer:function(a,e,g,h,i){var j=(a.ownerDocument||document,d.createElement(a,"tr",{id:"cm_group_"+f++,role:"row",tabIndex:-1,$cm_groupIndex:h})),k=j[0];k._collapsed=i;var l=e.titleClassMode;if(l===c){l=0;var m=e.$scope.titleClassRawExpression;if(m&&m.length){var n=this.$interpolate,o=m;l=3,m.indexOf(n.startSymbol())>=0?(l=1,o=this.$interpolate(m)):"{"==m.charAt(0)&&"}"==m.charAt(m.length-1)&&(l=2),e.titleClassExpression=o}e.titleClassMode=l}if(l){var p=e.titleClassExpression;if(3!=l&&(p=g.$eval(p)),p)if(b.isString(p))k.cm_groupClasses=p.split(" ");else if(b.isObject(p)){var q=[];b.forEach(p,function(a,b){a&&q.push(b)}),q.length&&(k.cm_groupClasses=q)}}this.groupStyleUpdate(j);{var r=d.createElement(j,"td",{id:"cm_groupTitle_"+f++,tabIndex:-1,nowrap:"nowrap",role:"gridcell",className:"cm_dataGrid_gcell",colspan:this.visibleColumns.length+1+this.rowIndent});this.groupTitleRenderer(r,e,g,h)}return j},groupTitleRenderer:function(a,b,c){var e=d.createElement(a,"div",{className:"cm_dataGrid_gcontainer"}),g=(d.createElement(e,"div",{className:"cm_dataGrid_gexpand",id:"cm_groupExpand_"+f++}),d.createElement(e,"label",{className:"cm_dataGrid_glabel"})),h=null,i=b.interpolatedTitleExpression;if(!i){var j=b.$scope.titleRawExpression;j&&(i=this.$interpolate(j),b.interpolatedTitleExpression=i)}if(i){var h=c.$eval(i);h&&g.text(h)}d.createElement(e,"div",{className:"cm_dataGrid_gline"})},groupStyleUpdate:function(a){var b=a;b[0]&&(b=b[0]);var c=["cm_dataGrid_group"];return b.cm_groupClasses&&c.push.apply(c,b.cm_groupClasses),e.MixElementClasses(b,c)}}}])}(window,window.angular),function(a,b,c){"use strict";
var d=b.module("camelia.renderers.grid");d.factory("camelia.renderers.grid.row",["$log","$timeout","$interpolate","camelia.core","camelia.cmTypes",function(a,d,e,f,g){var h=0;return{rowRenderer:function(a,d,e,g){var i=(a.ownerDocument||document,f.createElement(a,"tr",{id:"cm_row_"+h++,role:"row",tabIndex:-1,$cm_rowIndex:e})),j=i[0];j._rowIdent=g;var k=this.rowClassMode;if(k===c){k=0;var l=this.$scope.rowClassRawExpression;if(l&&l.length){var m=this.$interpolate,n=l;k=3,l.indexOf(m.startSymbol())>=0?(k=1,n=this.$interpolate(l)):"{"==l.charAt(0)&&"}"==l.charAt(l.length-1)&&(k=2),this.rowClassExpression=n}this.rowClassMode=k}if(k){var o=this.rowClassExpression;if(3!=k&&(o=d.$eval(o)),o)if(b.isString(o))j.cm_rowClasses=o.split(" ");else if(b.isObject(o)){var p=[];b.forEach(o,function(a,b){a&&p.push(b)}),p.length&&(j.cm_rowClasses=p)}}var q=this.selectionProvider;q&&q.contains(d.$row)&&(j._selected=!0),this.rowStyleUpdate(i);for(var r=0;g>r;r++){f.createElement(i,"td",{id:"cm_cindent_"+h++,"aria-hidden":"true"})}var s=this,t=0;b.forEach(this.visibleColumns,function(a){var b=a.scope?"th":"td",c=f.createElement(i,b,{id:"cm_cell_"+h++,"aria-labelledBy":a.titleElement.id,tabIndex:-1,nowrap:"nowrap",role:"gridcell",$cm_lindex:a.logicalIndex});a.scope&&c.attr("scope","row"),s.cellStyleUpdate(c),s.cellRenderer(c,d,e,a,t),t++});f.createElement(i,"td",{"aria-hidden":"true"});return i},rowStyleUpdate:function(a){var b=a;b[0]&&(b=b[0]);var c=b.cm_rowIndex,d=["cm_dataGrid_row","cm_dataGrid_row_"+(c%2?"odd":"even")];return b.cm_rowClasses&&d.push.apply(d,b.cm_rowClasses),g.MixElementClasses(b,d)},cellRenderer:function(a,b,c,d){var e=f.createElement(a,"label",{className:"cm_dataGrid_clabel"}),g=d.interpolatedExpression;if(g){var h=b.$eval(g);h&&e.text(h)}},cellStyleUpdate:function(a){var b=a;b[0]&&(b=b[0]);var c=b.cm_lindex,d=this.columns[c],e=[],f=["cm_dataGrid_cell"];return d.visibleIndex||f.push("cm_dataGrid_cfirst"),d.visibleIndex==this.visibleColumns.length-1&&f.push("cm_dataGrid_clast"),d.cellAlign&&e.push("cm_dataGrid_calign_"+d.cellAlign),d.cellClasses&&f.push.apply(f,d.cellClasses),b.cm_cellClasses&&f.push.apply(f,tr.cm_cellClasses),g.MixElementClasses(b,f,e)},computeColumnsNaturalWidths:function(){var a=this.getFirstRow();if(a){var c=a.getBoundingClientRect();if(c.width<1)return!1;var d=a.cells,e=this.rowIndent;b.forEach(this.visibleColumns,function(a){var b=d[a.visibleIndex+e];if(b){var c=b.getBoundingClientRect();a.naturalWidth=c.width}})}},moveColumnRow:function(a,b,c){var d=a.cells,e=a._rowIdent,f=this.visibleColumns,g=b.beforeMovingVisibleIndex,h=d[g+e],i=c&&d[c.beforeMovingVisibleIndex+e];if(i||(i=d[this._lastVisibleColumn.beforeMovingVisibleIndex+e].nextSibling),a.removeChild(h),a.insertBefore(h,i),b.visibleIndex){if(b.visibleIndex==f.length-1){this.cellStyleUpdate(h);var j=d[e+f.length-1];c&&j.id==c.id||this.cellStyleUpdate(j)}}else{this.cellStyleUpdate(h);var k=d[e];c&&k.id==c.id||this.cellStyleUpdate(k)}}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("camelia.renderers.grid");d.value("cm_grid_group_animation",0);var e=200;d.factory("camelia.renderers.grid.table",["$log","$q","$timeout","$injector","$interpolate","camelia.core","camelia.cmTypes","cm_grid_rowIndentPx","cm_grid_group_animation",function(a,d,f,g,h,i,j,k,l){var m=0;return{tableRenderer:function(a){var d=i.createElement(a,"div",{id:"cm_table_"+m++,className:"cm_dataGrid_table"});this.tableViewPort=d[0];var e=this;d.on("scroll",function(){e.titleViewPort.scrollLeft=e.tableViewPort.scrollLeft});var f=i.createElement(d,"table",{role:"grid",className:"cm_dataGrid_ttable",cellPadding:0,cellSpacing:0});this.tableElement=f[0];var g=null,h=this.$scope.caption;h!==c&&(g=i.createElement(f,"caption",{className:"cm_dataGrid_caption"}),g.text(h)),this.$scope.$watch("caption",function(){var a=e.$scope.caption;g||(g=i.createElement(r,"caption",{className:"cm_dataGrid_caption"})),g.text(b.isString(a)?a:"")});var j=this.rowIndent;if(j)for(var l=i.createElement(f,"colgroup",{className:"cm_dataGrid_colgroupIndent","aria-hidden":"true"}),n=0;j>n;n++){var o=i.createElement(l,"col",{className:"cm_dataGrid_colIndent"});o[0].style.width=k+"px"}var p=i.createElement(f,"colgroup",{className:"cm_dataGrid_colgroup"}),q=this.visibleColumns;b.forEach(q,function(a){var b=i.createElement(p,"col",{className:"cm_dataGrid_col"});b.data("cm_column",a),a.bodyColElement=b[0]}),this.hasResizableColumnVisible&&(this.rightColElement=i.createElement(p,"col",{"aria-hidden":!0,className:"cm_dataGrid_colSizer"})[0]);var r=i.createElement(f,"thead",{className:"cm_dataGrid_thead"});this.tableTHead=r[0];for(var s=i.createElement(r,"tr"),n=0;j>n;n++)i.createElement(s,"th",{className:"cm_dataGrid_thIndent","aria-hidden":"true"});b.forEach(q,function(a){var b=i.createElement(s,"th",{id:a.columnId,scope:"col"});a.bodyTitleElement=b[0],0==a.visibleIndex&&j&&(b.colspan=1+j);var c=a.$scope.title;c&&b.text(c),a.$scope.$watch("title",function(a){b.text(a?a:"")})});var t=i.createElement(f,"tbody",{className:"cm_dataGrid_tbody",id:"cm_tbody_"+m++});return this.tableTBody=t[0],this.tableStyleUpdate(d),d},newCriteriasExpression:function(a,c){var d=function(b,d){var e=a.$scope.criteriaValue;if(!e){var e=a.interpolatedExpression;if(!e)return!1}for(var f=b.$eval(e),g=a._criterias,h=0;h<g.length;h++){var i=g[h],j=c[i.id];if(j&&i.filterData(j,f,b,d,a)!==!1)return!0}return!1};return d.toJSON=function(){{var d=[],e={id:a.$scope.criteriaValue||a.$scope.fieldName||a.$scope.id,filters:d};a._criterias}return b.forEach(c,function(a){b.forEach(a,function(b){if(b.enabled){var c={type:b.type||a.type||b.id};d.push(c);var e=b.toJSON&&b.toJSON();e&&(c.parameters=e)}})}),d.length?e:null},d},tableRowsRenderer:function(a){function f(){E?(l.rowCount=z+E,l.maxRows=Math.max(l.maxRows,l.rowCount)):z?(l.rowCount=0,l.maxRows=0):(l.rowCount=-1,l.maxRows=-1)}function j(a){if(!a)return k.setRowIndex(-1),G.$destroy(),f(),!1;for(var b=!1;0>B||B>E;){var c;if(J){var g=Date.now();g>K&&(K=g+e,J.notify({count:E,rows:B}))}try{var h=k.getRowData();if(w){var l=w.getGroup(G,h);if(l!==H){H=l,I++,b=x.getCollapsedProvider().contains(l),G.$group=l,G.$count=w.getGroupCount(l);var o=n.groupRenderer(F,x,G,I,b);o.data("cm_rowValues",w.getGroupValues(l)),o.data("cm_value",l);var p=o[0];p._visibleIndex=E,p._rowIndex=A,delete G.$count}}if(!b){G.$index=E,G.$odd=!(1&E),G.$even=!G.$odd,G.$first=0==E,G.$pageNumber=-1,G.$pageCount=-1,G.$rowIndex=A,G.$row=h,m&&(G[m]=h);var o=n.rowRenderer(F,G,A,y);o.data("cm_value",h)}if(A++,E++,B>0&&E>=B)break;k.setRowIndex(A),c=k.isRowAvailable()}catch(q){throw k.setRowIndex(-1),G.$destroy(),q}if(i.isPromise(c))return c.then(j);if(c!==!0)break}return k.setRowIndex(-1),G.$destroy(),f(),d.when(!1)}var k=this.dataModel;if(k){var l=this.dataGrid,m=this.$scope.varName,n=this,o=this.visibleColumns;b.forEach(o,function(a){var b=a.interpolatedExpression;if(!b){var c=a.$scope.valueRawExpression;if(!c){var d=a.$scope.fieldName||a.$scope.id;d&&(c=h.startSymbol()+"$row."+d+h.endSymbol())}c&&(b=n.$interpolate(c),a.interpolatedExpression=b)}});var p=[];b.forEach(o,function(a){var c=a._criterias;if(c&&c.length){var d=a._criteriasContext,e={},f=0;b.forEach(c,function(a){var c=d[a.id];b.forEach(c,function(b){if(b.enabled){var c=e[a.id];c||(c=[],c.type=a.type,e[a.id]=c),c.push(b),f++}})});var g=!!f,h=a.titleElement;h._filtred!=g&&(h._filtred=g,i.BubbleEvent(h,"cm_update")),f&&p.push(n.newCriteriasExpression(a,e))}});var q=c;p.length&&(k.isFilterSupport()||(k=g.invoke(["camelia.FiltredDataModel",function(a){return new a(k,m)}])),q=p),k.setFilters(q);var r=this.sorters,s=c;if(r&&r.length){var t=r[0],u=t.column.$scope.sorter;u&&"server"!=u&&(k.isSortSupport()||(k=g.invoke(["camelia.SortedDataModel",function(a){return new a(k)}])),s=[{expression:u,column:t.column,ascending:t.ascending}])}k.setSorters(s);var v=!1,w=null,x=this.selectedGroupProvider;x&&(k.isGroupSupport()||(k=g.invoke(["camelia.GroupedDataModel",function(a){return new a(k,x,m)}])),v=!0,w=k),k.setGrouped(v);var y=w?1:0;k.setScope(this.$scope.$parent);var z=this.$scope.first;(!b.isNumber(z)||0>z)&&(z=0),l.first=z;var A=z,B=this.$scope.rows;b.isNumber(B)?k.setFetchProperties({rows:B}):B=-1,l.rows=B,b.isNumber(l.maxRows)||(l.maxRows=-1);var C=k.getRowCount(!1);0>C&&(C=-1),l.rowCount=C;var D,E=0,F=a[0]||a,G=this.$scope.$parent.$new(),H=null,I=-1,J=null,K=0;try{k.setRowIndex(A),D=k.isRowAvailable()}catch(L){throw k.setRowIndex(-1),G.$destroy(),l.rowCount=-1,l.maxRows=-1,L}return i.isPromise(D)?(J=null,D.then(j)):j(D)}},tableStyleUpdate:function(a){return j.MixElementClasses(a,["cm_dataGrid_table"],["cm_dataGrid_table_scroll"])},tableLayout:function(){},moveColumnTable:function(a,b){function c(c){var e=a[c],f=b&&b[c];f||(f=d._lastVisibleColumn[c].nextSibling);var g=e.parentNode;g.removeChild(e),g.insertBefore(e,f)}var d=this;c("bodyColElement"),c("bodyTitleElement"),this.forEachBodyElement("row",function(c){d.moveColumnRow(c,a,b)})},removeRowsOfGroup:function(a,c){function d(){var a=e.shift();return b.element(a).remove(),e.length?f(d,l,!1):void 0}for(var e=[],g=c.nextSibling;g;){var h=g.nextSibling,i=j.GetCMType(g);if("group"==i)break;l?e.push(g):b.element(g).remove(),g=h}e.length&&f(d,l,!1)},addRowsOfGroup:function(a,c){function d(){var a=o.$scope.$parent.$new();try{var b=h.shift();a.$index=e,a.$odd=!(1&e),a.$even=!a.$odd,a.$first=0==e,a.$pageNumber=-1,a.$pageCount=-1,a.$rowIndex=g,a.$row=b,k&&(a[k]=b);var i=o.rowRenderer(j,a,g,m);i.data("cm_value",b),g++,e++}finally{a.$destroy()}return l&&(c.parentNode.insertBefore(j,n),h.length)?f(d,l,!1):void 0}var e=c._visibleIndex,g=c._rowIndex,h=i.CloneArray(b.element(c).data("cm_rowValues"));if(h.length){var j=document.createDocumentFragment(),k=this.$scope.varName,m=this.rowIndent,n=c.nextSibling,o=this;if(!l){for(;h.length;)d();return void c.parentNode.insertBefore(j,n)}f(d,l,!1)}}}}])}(window,window.angular),function(a,b,c){"use strict";var d=32,e=b.module("camelia.renderers.grid");e.factory("camelia.renderers.grid.title",["$log","$timeout","camelia.core","camelia.cmTypes","cm_grid_rowIndentPx","cm_grid_sizerPx",function(a,e,f,g,h,i){var j=0;return{titleRenderer:function(a){var c=f.createElement(a,"div",{id:"cm_title_"+j++,className:"cm_dataGrid_title"});this.titleViewPort=c[0];var d=f.createElement(c,"ul",{className:"cm_dataGrid_ttitle"});this.titleBarElement=d[0],this.titleStyleUpdate(c);var e=this.columns,g=0,h=-1,i=[];this.visibleColumns=i,this.hasResizableColumnVisible=!1;var k=this;b.forEach(e,function(a){if(a.logicalIndex=g,a.visibleIndex=-1,a.columnId="cm_column_"+j++,a.scope&&(h>=0?a.scope=!1:h=g),a.visible){var b=f.createElement(d,"li",{id:"cm_tcell_"+j++,$cm_columnIndex:g,role:"columnheader"});a.titleElement=b[0],a.visibleIndex=i.length,b.data("cm_column",a),k.titleCellStyleUpdate(b),k.titleCellRenderer(b,a,g),i.push(a),a.$scope.resizeable&&(k.hasResizableColumnVisible=!0)}g++}),0>h&&e[0]&&(e[0].scope=!0);var l=f.createElement(d,"li",{className:["cm_dataGrid_tcell","cm_dataGrid_tcell_right"],"aria-hidden":!0});return f.createElement(l,"span"),this.titleCellRenderer(l),this.lastTitleCellElement=l[0],c},titleStyleUpdate:function(a){return g.MixElementClasses(a,["cm_dataGrid_title"])},titleCellRenderer:function(a,b){a[0]&&(a=a[0]);var c=a,d=null;if(b){var e=c,g=f.createElement(e,"button",{className:"cm_dataGrid_tbutton",tabIndex:this.tabIndex});b.buttonElement=g[0],e=g;var h=b.$scope.sorter;if(h){{f.createElement(c,"div",{className:"cm_dataGrid_tcursor"})}c._sortable=!0}var i=b.$scope.title,k=f.createElement(e,"label",{className:"cm_dataGrid_tlabel",textNode:i?i:""});b.labelElement=k[0],b.$scope.$watch("title",function(a){k.text(a?a:"")});var l=!1;if(b._criterias&&b._criterias.length){var m=f.createElement(c,"button",{className:"cm_dataGrid_tparams",tabIndex:-1,id:"cm_tparams_"+j++});b.parametersElement=m[0],f.createElement(m,"div",{className:"cm_dataGrid_tpArrow"}),f.createElement(m,"div",{className:"cm_dataGrid_tpFiltred"}),l=!0,c._filtreable=!0}var n=b.visibleIndex-1;n>=0&&(d=this.visibleColumns[n])}else d=this.visibleColumns[this.visibleColumns.length-1];var o=f.createElement(c,"div",{className:"cm_dataGrid_tsizer "+(l?"cm_dataGrid_tsizerHP":""),id:"cm_tsizer_"+j++}),p=o[0];b?b.sizerElement=p:this.lastSizerElement=p,d&&f.toBoolean(d.$scope.resizeable)||(p.style.display="none")},titleCellStyleUpdate:function(a){a[0]&&(a=a[0]);var c=a,d=c.cm_columnIndex,e=this.columns[d],f=null,h=b.isString(e.titleAlign)?e.titleAlign:e.cellAlign;return h&&(f=["cm_dataGrid_talign_"+h]),g.MixElementClasses(a,["cm_dataGrid_tcell"],f)},titleLayout:function(a,f){var g=this;if(this._hasData()&&!this._naturalWidths){var j=this.computeColumnsNaturalWidths();if(j===!1)return e(function(){return g.titleLayout(a,f)},10,!1)}var k=f,l=0,m=0,n=[],o=this.rowIndent;if(this.hasResizableColumnVisible&&(k-=i),b.forEach(this.visibleColumns,function(a){var b=!a.visibleIndex&&o*h,e=a.minWidth||0;(!e||d+b>e)&&(e=d+b),a.computedMinWidth=e;var f=a.specifiedWidthPx;if(f!==c&&f>0)return k-=f,a.width=f,void(a.widthType="specified");var g=a.specifiedWidthPercent;if(g!==c&&g>0)return m++,a.widthType="percent",a.layoutFinished=c,a.width=e,k-=e,a.naturalWidth>e&&(l+=a.naturalWidth-e),void n.push(a);var i=a.naturalWidth||0;i<a.computedMinWidth&&(i=a.computedMinWidth),a.maxWidth&&i>a.maxWidth&&(i=a.maxWidth),a.width=i,k-=i,a.widthType="natural"}),m)for(var p=!0;p&&k>=1;){var q=0;b.forEach(n,function(a){a.layoutFinished||(q+=a.specifiedWidthPercent)});var r=k;b.forEach(n,function(a){if(!a.layoutFinished){var b=r*(a.specifiedWidthPercent/q);b>k&&(b=k);var c=a.width+b;if(a.minWidth&&c<a.minWidth&&(c=a.minWidth),a.maxWidth&&c>a.maxWidth&&(c=a.maxWidth),c==a.width)return void(a.layoutFinished=!0);k-=c-a.width,a.width=c,p=!0}})}else this.fillWidth},titleCellLayout:function(){},moveColumnTitle:function(a,b){var c=a.titleElement,d=b&&b.titleElement;d||(d=this._lastVisibleColumn.titleElement.nextSibling);var e=c.parentNode;e.removeChild(c),e.insertBefore(c,d);for(var g=this.visibleColumns,h=0;h<g.length;h++){var i=g[h].sizerElement,j=h&&f.toBoolean(g[h-1].$scope.resizeable);i.style.display=j?"block":"none"}if(this.lastSizerElement){var j=f.toBoolean(g[h-1].$scope.resizeable);this.lastSizerElement.style.display=j?"block":"none"}},beginMovingTitleCell:function(a){var c=this.titleBarElement,d=c.getBoundingClientRect(),e=c.style;e.height=d.height+"px",b.forEach(this.visibleColumns,function(a){var b=a.titleElement;a._movingLeft=b.offsetLeft});var f=this.lastTitleCellElement.offsetLeft;a.titleElement.style.zIndex="1000",a.titleElement.style.backgroundColor="transparent",b.forEach(this.visibleColumns,function(a){var b=a.titleElement,c=b.style;c.left=a._movingLeft+"px",c.position="absolute"}),e=this.lastTitleCellElement.style,e.left=f+"px",e.height=d.height+"px",e.position="absolute"},movingTitleCell:function(a,d,e,f){var g=a._movingLeft+e;a.titleElement.style.left=g+"px";var h=g+f;this._movingOverColumnIndex=c;var i=this;b.forEach(this.visibleColumns,function(b){var c=b.titleElement;if(c.id!=a.titleElement.id){var d=b._movingLeft;h<b._movingLeft+b.width&&b._movingLeft<a._movingLeft&&(d+=a.width),h>=b._movingLeft&&(b._movingLeft>a._movingLeft&&(d-=a.width),h<b._movingLeft+b.width&&(i._movingOverColumnIndex=b.visibleIndex)),c.style.left=d+"px",c.style.transition="300ms ease-in-out"}})},endMovingTitleCell:function(a){var d=this._movingOverColumnIndex;this._movingOverColumn=c,a.titleElement.style.zIndex="",a.titleElement.style.backgroundColor="",b.forEach(this.visibleColumns,function(a){var b=a.titleElement,d=b.style;d.left="",d.position="",d.transition="",a._movingLeft=c});var e=this.lastTitleCellElement.style;e.left="",e.height="",e.position="";var f=this.titleBarElement;return e=f.style,e.height="",e.width="",d}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("camelia.renderers.grid");d.factory("camelia.renderers.grid.utils",["$log","$timeout","camelia.core","camelia.cmTypes",function(a,d,e,f){return{getFirstRow:function(){var a=this.tableTBody;return a?f.GetNextType(a.firstChild,"row"):null},forEachBodyElement:function(a,b){var c=this.tableTBody;if(c){var d=c.rows;return f.ForEachElement(d,a,b)}},registerElement:function(a,e){if(!this._cacheValues){this._cacheValues=[],this._cacheElements=[],this._cacheFilled=!1;var f=this;d(function(){delete f._cacheValues,delete f._cacheElements,delete f._cacheFilled},50,!1)}e===c&&(e=b.element(a).data("cm_value"),e===c||this._cacheValues.indexOf(e)>=0)||(this._cacheElements.push(a),this._cacheValues.push(e))},getElementFromValue:function(a,c,d){var e=this._cacheValues;if(e){var g=e.indexOf(a);if(g>=0){var h=this._cacheElements[g];if(c){var i=f.GetCMType(h);if(b.isString(c)){if(i!=c)return null}else if(!c[i])return null}return h}if(this._cacheFilled)return null}var j=this,k=null;return this.forEachBodyElement(c,function(c){var e=b.element(c).data("cm_value");return j.registerElement(c,e),e!==a||(k=c,d)?void 0:!1},c),d&&(this._cacheFilled=!0),k}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("camelia.renderers.grid");d.value("cm_filtersPopup_className","cm_popup cm_filtersPopup");var e=0,f="rfilter";d.factory("camelia.renderers.FiltersPopup",["$log","$q","$exceptionHandler","$timeout","camelia.core","camelia.cmTypes","cm_filtersPopup_className","camelia.Key","camelia.renderers.Popup",function(a,d,g,h,i,j,k,l,m){function n(a){return j.SearchElements({lfilter:null,ifilter:null,rfilter:null,popup:null},"popup",a)}var o=function(a,b,c,d,e){b=b||{},b.className="cm_filtersPopup",m.call(this,a,b),this._refreshFunc=e,this._column=c,this._dataModel=d,this._closeDestroy=!0};return o.prototype=Object.create(m.prototype),b.extend(o.prototype,{constructor:o,_fillBody:function(a){var c=i.createElement(a,"ul",{className:"cm_filtersPopup_list"}),d=this._column._criterias,g=this._column._criteriasContext,h=this;b.forEach(d,function(a){var d=a.contributeFilters(h.dataModel),j=g[a.id]||{},k={};g[a.id]=k;var l=0;b.forEach(d,function(b){var d=b.id;d||(d=a.id+"__"+l++,b.id=d);var g=j[d];g||(g=b),k[d]=g;var m=i.createElement(c,"li",{id:"cm_"+f+"_"+e++});m.data("context",g);var n=i.createElement(m,"input",{id:"cm_ifilter_"+e++,type:"checkbox",className:"cm_filtersPopup_input",name:d});g.enabled&&(n[0].checked=!0);{var o=i.createElement(m,"div",{id:"cm_lfilter_"+e++,$inputTarget:n[0].id});i.createElement(o,"label",{className:"cm_filtersPopup_label",textNode:b.name||"### unknown ###"})}b.contributeDOM&&b.contributeDOM(c,g,a,column),h._labelStyleUpdate(o),h._rowStyleUpdate(m)})}),this._popupStyleUpdate(a)},_open:function(a){a.on("keydown",this._onKeyPress()),a.on("mouseover",this._onMouseOver()),a.on("mouseout",this._onMouseOut()),a.on("mouseleave",this._onMouseLeave()),a.on("click",this._onClick()),this._mouseDownListener=this._onMouseDown(),document.body.addEventListener("mousedown",this._mouseDownListener,!0),this._focusListener=this._onFocus(),document.body.addEventListener("focus",this._focusListener,!0),this._blurListener=this._onBlur(),document.body.addEventListener("blur",this._blurListener,!0),a.on("cm_update",this._onStyleUpdate());var b=a.isolateScope(),c=this;b.$on("$destroy",function(){c._close()});var d=a[0].querySelector(".cm_filtersPopup_input");d&&i.setFocus(d)},_close:function(){var a=this._focusListener;a&&(this._focusListener=c,document.body.removeEventListener("focus",a,!0)),a=this._blurListener,a&&(this._blurListener=c,document.body.removeEventListener("blur",a,!0)),a=this._mouseDownListener,a&&(this._mouseDownListener=c,document.body.removeEventListener("mousedown",a,!0))},_popupStyleUpdate:function(a){return j.MixElementClasses(a,["cm_popup","cm_filtersPopup"])},_rowStyleUpdate:function(a){return j.MixElementClasses(a,["cm_filtersPopup_item"])},_labelStyleUpdate:function(a){return j.MixElementClasses(a,["cm_filtersPopup_right"])},_refreshDatas:function(){this._column;this._refreshFunc()},_onMouseOver:function(){var a=this;return function(b){var c=b.target,d=n(c);j.SwitchOnState(a,d,"over")}},_onMouseOut:function(){var a=this;return function(b){var c=b.relatedTarget,d=n(c);j.SwitchOffState(a,d,"over")}},_onMouseLeave:function(){var a=this;return function(b){var c=b.target,d=n(c);j.SwitchOffState(a,d,"over")}},_onFocus:function(){var a=this;return function(b){var c=b.target,d=n(c);return i.log("FiltersPopup.OnFocus ",c,d,b.relatedTarget),d.popup?void j.SwitchOnState(a,d,"focus",function(){}):void a.close()}},_onBlur:function(){var a=this;return function(b){var c=b.relatedTarget,d=n(c);return i.log("FiltersPopup.OnBlur relatedTarget=",c,"target=",b.target,d),c||b.target?void j.SwitchOffState(a,d,"focus"):void a.close()}},_onClick:function(){var a=this;return function(c){var d=c.target,e=n(d);e.ifilter&&(b.element(e.rfilter).data("context").enabled=!!e.ifilter.checked,a._refreshDatas())}},_onMouseDown:function(){var a=this;return function(c){var d=c.target,e=n(d);if(i.log("FiltersPopup.OnMouseDown ",d,e),!e.popup)return a.close(),c.stopPropagation(),void c.preventDefault();if(e.lfilter){var f=document.getElementById(e.lfilter.inputTarget);f.checked=!f.checked,b.element(e.rfilter).data("context").enabled=f.checked,a._refreshDatas(),h(function(){a.close()})}j.SwitchOnState(a,e,"mouseDown",function(){}),c.stopPropagation(),c.preventDefault()}},_onStyleUpdate:function(){var a={popup:"_popupStyleUpdate",rfilter:"_rowStyleUpdate",lfilter:"_labelStyleUpdate"},c=this;return function(d){var e=d.relatedTarget,f=j.GetCMType(e);if(f){var g=b.element(e),h=c[a[f]];return h?(h(g),void d.stopPropagation()):void 0}}},_onKeyPress:function(){var a=this;return function(b){var c=b.target,d=n(c);return d.ifilter?a.performKeyPress_input(d.ifilter,b,d):void 0}},performKeyPress_input:function(a,b,c){var d,e=c.rfilter,g=e.parentNode,h=null,k=this.container;switch(b.keyCode){case l.VK_DOWN:d=!0;var h=j.GetNextType(e.nextSibling,f);h||(h=j.GetNextType(g.firstChild,f));break;case l.VK_PAGE_DOWN:d=!0,h=j.GetPreviousVisibleType(k,g.lastChild,f),h&&h.id==e.id&&k.scrollHeight>k.offsetHeight&&(k.scrollTop+=k.clientHeight-e.offsetHeight,h=j.GetPreviousVisibleType(k,g.lastChild,f));break;case l.VK_END:d=!0,h=j.GetPreviousType(g.lastChild,f);break;case l.VK_UP:d=!0;var h=j.GetPreviousType(e.previousSibling,f);h||(h=j.GetPreviousType(g.lastChild,f));break;case l.VK_PAGE_UP:d=!0,h=j.GetNextVisibleType(k,g.firstChild,f),h&&h.id==e.id&&(k.scrollTop-=k.clientHeight-e.offsetHeight,h=j.GetNextVisibleType(k,g.firstChild,f));break;case l.VK_HOME:d=!0,h=j.GetNextType(g.firstChild,f)}if(h){var a=h.querySelector(".cm_filtersPopup_input");a&&i.setFocus(a)}d&&(b.stopPropagation(),b.preventDefault())}}),o}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("camelia.renderers.pager",["camelia.components.pager","camelia.key","camelia.i18n.pager"]);d.value("cm_pager_className","cm_pager"),d.factory("camelia.renderers.Pager",["$log","$q","$exceptionHandler","camelia.core","camelia.cmTypes","cm_pager_className","camelia.Key","camelia.i18n.pager",function(a,d,e,f,g,h,i,j){function k(a){return g.SearchElements({lpager:null,vpager:null,bpager:null,pager:null},"pager",a)}var l=0,m=function(a){b.extend(this,a)};return m.prototype={render:function(a){var b=f.createElement(a,"div",{id:this.pager.id,$cm_type:"pager"});this.containerElement=b[0],b.on("mouseover",this._onMouseOver()),b.on("mouseout",this._onMouseOut()),b.on("mousedown",this._onMouseDown()),b.on("click",this._onSimpleClick()),b.on("mouseup",this._onMouseUp()),b.on("keydown",this._onKeyPress()),this._focusListener=this._onFocus(),b[0].addEventListener("focus",this._focusListener,!0),this._blurListener=this._onBlur(),b[0].addEventListener("blur",this._blurListener,!0);var d=this;return this.$scope.$on("$destroy",function(){var a=d._focusListener;a&&(d._focusListener=c,b[0].removeEventListener("focus",a,!0)),a=d._blurListener,a&&(d._blurListener=c,b[0].removeEventListener("blur",a,!0))}),b.on("cm_update",this._onStyleUpdate()),b},_onMouseOver:function(){var a=this;return function(b){var c=b.target,d=k(c);g.SwitchOnState(a,d,"over")}},_onMouseOut:function(){var a=this;return function(b){var c=b.relatedTarget,d=k(c);g.SwitchOffState(a,d,"over")}},_onFocus:function(){var a=this;return function(b){var c=b.target,d=k(c);g.SwitchOnState(a,d,"focus")}},_onBlur:function(){var a=this;return function(b){var c=b.relatedTarget,d=k(c);g.SwitchOffState(a,d,"focus")}},_onMouseDown:function(){var a=this;return function(b){var c=b.target,d=k(c);g.SwitchOnState(a,d,"mouseDown")}},_onMouseUp:function(){var a=this;return function(){var b=k();g.ClearState(a,b,"mouseDown")}},_onKeyPress:function(){return function(a){{var b=a.target;k(b)}}},_onSimpleClick:function(){var a=this;return function(b){var c=b.target,d=k(c),e=d.bpager;e&&e.value&&a.target.setFirst(parseInt(e.value,10))}},_onStyleUpdate:function(){var a={pager:"pagerStyleUpdate",vpager:"valueStyleUpdate",bpager:"buttonStyleUpdate",lpager:"labelStyleUpdate"},c=this;return function(d){var e=d.relatedTarget,f=g.GetCMType(e);if(f){var h=b.element(e),i=c[a[f]];return i?(i.call(c,h),void d.stopPropagation()):void 0}}},pagerPositionsUpdate:function(a){var c=b.element(this.containerElement);c.empty();var d=document.createDocumentFragment();this.renderExpression(d,this.format,a),c.append(d)},renderExpression:function(a,b,d){for(var e=null,f=0;f<b.length;){var g=b.charAt(f++);if("{"!=g)if("'"!=g)e||(e=new Array),e.push(g);else{e||(e=new Array);for(var h=f;;){var i=b.indexOf("'",h);if(0>i){e.push(b.substring(h)),f=b.length;break}{if("'"!=b.charAt(i+1)){e.push(b.substring(h,i)),f=i+1;break}e.push(b.substring(h,i),"'"),h=i+2}}}else{var i=b.indexOf("}",f),j=b.substring(f,i).toLowerCase();f=i+1,e&&e.length&&(this.renderSpan(a,e.join("")),e=null);var k=c,l=j.indexOf(":");if(l>=0){var m=j.substring(l+1);j=j.substring(0,l),k=new Object;for(var n=m.split(";"),h=0;h<n.length;h++){var o=n[h],p="",q=o.indexOf("=");q>=0&&(p=o.substring(q+1),o=o.substring(0,q)),k[o]=p}}this.renderType(a,j,k,d)}}e&&e.length&&this.renderSpan(a,e.join(""))},renderSpan:function(a,b){var c=f.createElement(a,"span",{textNode:b,id:"cm_lpager_"+l++});return this.labelStyleUpdate(c),c},renderButton:function(a,b,c){var d=f.createElement(a,"button",{textNode:f.lang(j,c+"_label"),id:"cm_bpager_"+l++,$value:b,$pagerType:c}),e=f.lang(j,c+"_tooltip");return e&&(d.title=e),0>b&&d.attr("disabled",!0),this.buttonStyleUpdate(d),d},renderValue:function(a,b,c){var d=f.createElement(a,"span",{textNode:b,id:"cm_vpager_"+l++,$pagerType:c});return this.valueStyleUpdate(d),d},renderType:function(a,b,c,d){var e=d.first,f=d.rowCount,g=d.maxRows,h=d.rows;switch(b){case"first":case"position":this.renderValue(a,e+1,"first");break;case"last":var i=e+h;f>=0&&i>=f?i=f:g>0&&i>=g&&(i=g),this.renderValue(a,i,"last");break;case"rowcount":if(0>f)return;this.renderValue(a,f,"rowCount");break;case"pagecount":if(0>f||0>=h)return;var j=Math.floor((f-1)/h+1);this.renderValue(a,j,"pageCount");break;case"pageposition":if(0>=h)return;var k=Math.floor(e/h)+1;this.renderValue(a,k,"pagePosition");break;case"bprev":var l=e-h;0>l&&(l=0),this.renderButton(a,e>0?l:-1,"bprev");break;case"bnext":var l=e+h,m=-1;f>=0?(l+h>f&&(l=f-(f+h-1)%h-1,0>l&&(l=0)),l>e&&(m=l)):m=l,this.renderButton(a,m,"bnext")}},pagerStyleUpdate:function(a){var b=h.split(" "),c=this.$scope.className;return c&&b.push(c),g.MixElementClasses(a,b)},labelStyleUpdate:function(a){return g.MixElementClasses(a,["cm_pager_label"])},valueStyleUpdate:function(a){return a[0]&&(a=a[0]),g.MixElementClasses(a,["cm_pager_value","cm_pager_value_"+a.pagerType])},buttonStyleUpdate:function(a){return a[0]&&(a=a[0]),g.MixElementClasses(a,["cm_pager_button","cm_pager_button_"+a.pagerType])}},m}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("camelia.renderers.popup",["camelia.components.popup","camelia.key"]);d.value("cm_popup_className","cm_popup"),d.factory("camelia.renderers.Popup",["$log","$q","$exceptionHandler","$timeout","$rootScope","camelia.core","camelia.cmTypes","cm_popup_className","camelia.Key",function(a,d,e,f,g,h,i,j){function k(a,b){b&&(this.configuration=b);var c=(a||g).$new();this._releaseScope=!0,this.$scope=c}var l=0;return k.INITIALIZING=1,k.INITIALIZED=2,k.RENDERING=4,k.RENDERED=8,k.OPENED=16,k.CLOSED=32,k.DESTROYED=64,k.prototype={_setState:function(a,b){var c=this._state&~a|(b||0);this._state!=c&&(this._state=c)},_addState:function(a){this._state&a||(this._state|=a)},containsState:function(a){return a?this._state&a:this._state},initialize:function(){if(this.containsState(k.DESTROYED))throw new Error("Already destroyed");if(!this.containsState(k.INITIALIZING)){this._addState(k.INITIALIZING);var a=this._initialize.apply(this,arguments);h.isPromise(a)||(a=d.when(a));var b=this;return a.then(function(){b._addState(k.INITIALIZED);var a=b.render();return h.isPromise(a)||(a=d.when(a)),a})}},_initialize:function(){},render:function(){if(this.containsState(k.DESTROYED))throw new Error("Already destroyed");if(!this.containsState(k.RENDERING)){this._addState(k.RENDERING),this.$emit("cm_popup_rendering");var a=b.element(document.createDocumentFragment()),c=j;this.configuration.className&&(c+=" "+this.configuration.className);var e=h.createElement(a,"div",{id:"cm_popup_"+l++,className:c});this.container=e[0],e.data("$isolateScope",this.$scope);var f=this._render(b.element(this.container));h.isPromise(f)||(f=d.when(f));var g=this;return f.then(function(){document.body.appendChild(g.container),g._addState(k.RENDERED),g.$emit("cm_popup_rendered")})}},_render:function(a){return this._fillBody(a,a)},open:function(a){function c(){var d=e.container;return d.offsetWidth||d.offsetHeight?(e.$emit("cm_popup_DOMReady"),d.style.display="",e._updatePosition(d,a),e.$emit("cm_popup_opened"),e._addState(k.OPENED),e._open(b.element(d)),d):f(c,10,!1)}var e=this;if(this.containsState(k.DESTROYED))throw new Error("Already destroyed");if(!this.containsState(k.RENDERED)){if(!this.containsState(k.INITIALIZING)){var g=this.initialize();return h.isPromise(g)||(g=d.when(g)),g.then(function(){return e.open(a)})}return null}return this.containsState(k.OPENED)?null:(this._setState(k.CLOSED,0),this._position=a,f(c,10,!1))},_open:function(){},_updatePosition:function(a,c){c=c||{};var d,e;if(b.isNumber(c.X)&&b.isNumber(c.Y))d=c.X,e=c.Y;else if(c.reference){var f=c.reference.getBoundingClientRect();switch(d=f.left,e=f.top,c.halign){case"right":d+=f.width,c.deltaX&&(d+=c.deltaX)}switch(c.valign){case"bottom":e+=f.height,c.deltaY&&(e+=c.deltaY)}}if(!b.isNumber(d))return!1;var g=a.style;return g.left=d+"px",g.top=e+"px",!0},close:function(){if(this.containsState(k.DESTROYED))throw new Error("Already destroyed");if(this.containsState(k.CLOSED)||!this.containsState(k.OPENED))return!1;this._setState(k.OPENED,k.CLOSED);var a=this.container;return a?(a.style.display="none",this._close(b.element(a)),this.$emit("cm_popup_closed"),this._closeDestroy&&this.destroy(),!0):!1},_close:function(){},destroy:function(){if(!this.containsState(k.CLOSED)||this.containsState(k.DESTROYED))return!1;this._setState(k.OPENED,k.DESTROYED);var a=this.container;return a?(this.container=c,b.element(a).remove(),this.$emit("cm_popup_destroyed"),this.$scope&&this._releaseScope&&(this.$scope.$destroy(),this.$scope=c),!0):!1},_fillBody:function(a,b){return b.fillPopup?b.fillPopup(a):void 0},$emit:function(){this.$scope&&this.$scope.$emit.apply(this.$scope,arguments)}},k}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.directives.grid",["camelia.core"]);c.value("cm_grid_componentProviderName","camelia.components.grid:camelia.components.GridProvider"),c.directive("cmDatagrid",["$injector","$interpolate","$log","$q","camelia.core","cm_grid_componentProviderName",function(a,b,c,d,e,f){return{restrict:"E",scope:{dataModelProvider:"=?",dataModelProviderName:"@datamodelprovider",componentProvider:"=?",componentProviderName:"@componentprovider",rendererProvider:"=?",rendererProviderName:"@rendererprovider",selectionProvider:"=?",selectionProviderName:"@selectionprovider",value:"=",varName:"@var",style:"@",className:"@class",caption:"@",tabIndex:"@",id:"@",selection:"=?",cursor:"=?",first:"=?",rows:"=?",rowCount:"=?rowcount",selectable:"@",selectionCardinality:"@selectioncardinality"},replace:!0,controller:function(a){var b=a.componentProvider;
if(!b){var c=a.componentProviderName||f;b=e.LoadProvider(c)}this.componentProvider=b,a.columns=[],this.appendColumn=function(b){a.columns.push(b)},a.groupProviders=[],this.appendGroupProvider=function(b){a.groupProviders.push(b)}},compile:function(){return{pre:function(a,c,d,e){a.rowClassRawExpression=c.attr("rowClass");var f=new e.componentProvider.DataGrid(a,c,b);e.dataGrid=f},post:function(b,f,g,h){var i=h.dataGrid,j=a.invoke(i.construct,i);e.isPromise(j)||(j=d.when(j)),j.then(function(a){c.info("Table created ",a),f.replaceWith(a)},function(a){c.error("Failed to create table ",a)})}}}}}]),c.directive("cmDatacolumn",["camelia.core",function(){return{require:"^cmDatagrid",restrict:"E",replace:!0,scope:{id:"@",visible:"@",titleAlign:"@titlealign",cellAlign:"@cellalign",width:"@",maxWidth:"@maxwidth",minWidth:"@minwidth",title:"@",cellClass:"@",columnClass:"@",sorter:"@",resizeable:"@",checkable:"@",fieldName:"@fieldname",checkList:"=?",columnImageURL:"@columnimageurl",cellImageURL:"@cellimageurl",criteriaValue:"@criteriavalue"},controller:function(){this.criterias=[]},compile:function(){return{pre:function(a,b){a.valueRawExpression=b.attr("text")||b.attr("value")},post:function(a,c,d,e){var f=c.controller("cmDatacolumn"),g=new e.componentProvider.DataColumn(a);b.forEach(f.criterias,function(a){g.addCriteria(a)}),e.appendColumn(g)}}}}}]),c.directive("cmDatagroup",["camelia.core",function(){return{require:"^cmDatagrid",restrict:"E",scope:{title:"@",value:"@",closeable:"@",disabled:"@",collapsedGroups:"=?collapsedgroups",className:"@class",sorter:"@"},compile:function(){return{pre:function(a,b){a.titleRawExpression=b.attr("title"),a.titleClassRawExpression=b.attr("titleclass"),a.valueRawExpression=b.attr("value")},post:function(a,b,c,d){var e=new d.componentProvider.DataGroup(a);d.appendGroupProvider(e)}}}}}]),c.directive("cmCriteria",["camelia.core","$log","$injector",function(a,c,d){return{require:"^cmDatacolumn",restrict:"E",scope:{type:"@"},compile:function(){return{pre:function(){},post:function(a,e,f,g){var h=a.type;if(!b.isString(h)||!h.length)throw new Error("Invalid criteria type ("+h+")");var i,j=h.indexOf(".");i=j>=0?h:"camelia.criteria."+h;var k=g.criterias;try{d.invoke([i,function(b){var c=new b(a,e,f);k.push(c)}])}catch(l){c.error("Can not instantiate criteria '"+i+"'",l)}}}}}}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.directives.pager",["camelia.core"]);c.value("cm_pager_componentProviderName","camelia.components.pager:camelia.components.Pager"),c.directive("cmPager",["$injector","$interpolate","$log","$q","camelia.core","cm_pager_componentProviderName",function(a,b,c,d,e,f){return{restrict:"E",scope:{forElementId:"@for",target:"=?",style:"@",className:"@class",caption:"@",tabIndex:"@",id:"@",format:"=?"},replace:!0,controller:function(a){var b=a.componentProvider;if(!b){var c=a.componentProviderName||f;b=e.LoadProvider(c)}this.componentProvider=b},compile:function(){return{pre:function(){},post:function(b,f,g,h){var i=new h.componentProvider(b,f),j=a.invoke(i.construct,i);e.isPromise(j)||(j=d.when(j)),j.then(function(a){c.info("Pager created ",a),f.replaceWith(a)},function(a){c.error("Failed to create pager ",a)})}}}}}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.i18n.criteria",[]);c.factory("camelia.i18n.criteria",[function(){return{en:{alphabetic_others:"Others"}}}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.i18n.criteria");c.config(["$provide",function(a){a.decorator("camelia.i18n.criteria",["$delegate",function(a){return b.extend(a,{fr:{alphabetic_others:"Autres"}})}])}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.i18n.pager",[]);c.factory("camelia.i18n.pager",[function(){return{en:{bfirst_label:"First",blast_label:"Last",bprev_label:"Previous",bprev_tooltip:"Show previous page",bnext_label:"Next",bnext_tooltip:"Show next page"}}}])}(window,window.angular),function(a,b){"use strict";var c=b.module("camelia.i18n.pager");c.config(["$provide",function(a){a.decorator("camelia.i18n.pager",["$delegate",function(a){return b.extend(a,{fr:{bfirst_label:"Premier",blast_label:"Dernier",bprev_label:"Prcdent",bprev_tooltip:"Voir la page prcdente",bnext_label:"Suivant",bnext_tooltip:"Voir la page suivante"}})}])}])}(window,window.angular);
//# sourceMappingURL=dist/camelia.min.js.map